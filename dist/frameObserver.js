(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["frameObserver"] = factory();
	else
		root["frameObserver"] = factory();
})(this, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.l = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// identity function for calling harmony imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };

/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};

/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};

/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 15);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _guid = __webpack_require__(3);\n\nvar _guid2 = _interopRequireDefault(_guid);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***\n * @namespace\n */\nvar util = {\n\n  /**\n   * @param {String} str\n   * @type boolean\n   */\n  isString: function isString(str) {\n\n    return typeof str === \"string\";\n  },\n\n  /**\n   * @param {HTMLElement} el\n   * @type boolean\n   */\n  isElement: function isElement(el) {\n\n    return el instanceof Element;\n  },\n\n  /**\n   * @param {Object} obj\n   * @type boolean\n   */\n  isObject: function isObject(obj) {\n    return (typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj)) == \"object\";\n  },\n\n  /**\n   * @param {Object} obj\n   * @type boolean\n   */\n  isArray: function isArray(obj) {\n    return typeof Object.prototype.toString.call(obj) == \"[object Array]\";\n  },\n\n  /**\n   * @param {Object} target\n   * @param {Object} obj\n   * @type Object\n   */\n  clone: function (_clone) {\n    function clone(_x, _x2, _x3) {\n      return _clone.apply(this, arguments);\n    }\n\n    clone.toString = function () {\n      return _clone.toString();\n    };\n\n    return clone;\n  }(function (deep, cloneObj, copyObj) {\n\n    var target,\n        obj,\n        params = this.copyArray(arguments),\n        copyObjs;\n\n    if (typeof deep != \"boolean\") {\n      target = deep, copyObjs = params.slice(1);\n    } else {\n      target = cloneObj;\n      copyObjs = params.slice(2);\n    }\n\n    for (var index in copyObjs) {\n\n      var obj = copyObjs[index];\n\n      for (var i in obj) {\n\n        if (util.isArray(obj[i])) {\n\n          target[i] = util.isArray(target[i]) ? target[i] : [];\n        } else if (util.isObject(obj[i])) {\n\n          target[i] = util.isObject(target[i]) ? target[i] : {};\n        }\n\n        if (deep && util.isObject(obj[i])) clone(target[i], obj[i]);else target[i] = obj[i];\n      }\n    }\n\n    return target;\n  }),\n\n  /***\n   * @param {Array} array\n   * @type Array\n   */\n  copyArray: function copyArray(array) {\n\n    var newArray = [];\n\n    for (var i = 0; i < array.length; i++) {\n      newArray[i] = array[i];\n    }return newArray;\n  },\n\n  /**\n   * @param {String} tagName\n   */\n  createElement: function createElement(tagName) {\n    return document.createElement(tagName);\n  },\n\n  DATA_KEY: (0, _guid2.default)(),\n\n  /**\n   * @param {HTMLElement} el\n   * @param {String} key\n   * @param {*} val\n   */\n  data: function data(el, key, val) {\n    var DATA_KEY = this.DATA_KEY;\n    var data = el[DATA_KEY] ? el[DATA_KEY] : el[DATA_KEY] = {};\n\n    if (arguments.length === 3) {\n      data[key] = val;\n    } else {\n      return data[key];\n    }\n  },\n\n  /** \n   * @param {HTMLElement} el\n   * @type Object\n   */\n  getContentWindowByEl: function getContentWindowByEl(el) {\n\n    return util.isElement(el) ? el.contentWindow : el;\n  },\n\n  /**\n   * @param {Window} win\n   * @param {Object} data\n   * @param {String} origin\n   */\n  postMessage: function postMessage(win, data, origin) {\n    win.postMessage(JSON.stringify(data), origin);\n  }\n};\n\nexports.default = util;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvdXRpbC5qcz9jZmQyIl0sInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IGd1aWQgZnJvbSAnLi9ndWlkJztcblxuLyoqKlxuICogQG5hbWVzcGFjZVxuICovXG52YXIgdXRpbCA9IHtcblxuICAvKipcbiAgICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICAgKiBAdHlwZSBib29sZWFuXG4gICAqL1xuICBpc1N0cmluZzpmdW5jdGlvbiggc3RyICl7XG5cbiAgICByZXR1cm4gdHlwZW9mIHN0ciA9PT0gXCJzdHJpbmdcIjtcbiAgfSxcblxuICAvKipcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxcbiAgICogQHR5cGUgYm9vbGVhblxuICAgKi9cbiAgaXNFbGVtZW50OmZ1bmN0aW9uKCBlbCApe1xuXG4gICAgcmV0dXJuIGVsIGluc3RhbmNlb2YgRWxlbWVudDtcbiAgfSxcblxuICAvKipcbiAgICogQHBhcmFtIHtPYmplY3R9IG9ialxuICAgKiBAdHlwZSBib29sZWFuXG4gICAqL1xuICBpc09iamVjdDpmdW5jdGlvbiggb2JqICl7IHJldHVybiB0eXBlb2Ygb2JqID09IFwib2JqZWN0XCI7IH0sXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAgICogQHR5cGUgYm9vbGVhblxuICAgKi9cbiAgaXNBcnJheTpmdW5jdGlvbiggb2JqICl7IHJldHVybiB0eXBlb2YgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaikgPT0gXCJbb2JqZWN0IEFycmF5XVwiOyB9LFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge09iamVjdH0gdGFyZ2V0XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAgICogQHR5cGUgT2JqZWN0XG4gICAqL1xuICBjbG9uZTpmdW5jdGlvbiggZGVlcCwgY2xvbmVPYmosIGNvcHlPYmogKXtcblxuICAgIHZhciB0YXJnZXQsIG9iaiwgcGFyYW1zID0gdGhpcy5jb3B5QXJyYXkoIGFyZ3VtZW50cyApLCBjb3B5T2JqcztcblxuICAgIGlmICggdHlwZW9mIGRlZXAgIT0gXCJib29sZWFuXCIgKSB7XG4gICAgICB0YXJnZXQgPSBkZWVwLFxuICAgICAgY29weU9ianMgPSBwYXJhbXMuc2xpY2UoMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRhcmdldCA9IGNsb25lT2JqO1xuICAgICAgY29weU9ianMgPSBwYXJhbXMuc2xpY2UoMik7XG4gICAgfVxuXG4gICAgZm9yICggdmFyIGluZGV4IGluIGNvcHlPYmpzICkge1xuXG4gICAgICB2YXIgb2JqID0gY29weU9ianNbaW5kZXhdO1xuXG4gICAgICBmb3IgKCB2YXIgaSBpbiBvYmogKSB7XG5cbiAgICAgICAgaWYgKCB1dGlsLmlzQXJyYXkoIG9ialtpXSApICkge1xuXG4gICAgICAgICAgdGFyZ2V0W2ldID0gdXRpbC5pc0FycmF5KCB0YXJnZXRbaV0gKSA/IHRhcmdldFtpXTogW107XG5cbiAgICAgICAgfSBlbHNlIGlmICggdXRpbC5pc09iamVjdCggb2JqW2ldICkgKSB7XG5cbiAgICAgICAgICB0YXJnZXRbaV0gPSB1dGlsLmlzT2JqZWN0KCB0YXJnZXRbaV0gKSA/IHRhcmdldFtpXToge307XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICggZGVlcCAmJiB1dGlsLmlzT2JqZWN0KCBvYmpbaV0gKSApIGNsb25lKCB0YXJnZXRbaV0sIG9ialtpXSApO1xuXG4gICAgICAgIGVsc2UgdGFyZ2V0W2ldID0gb2JqW2ldO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH0sXG5cbiAgLyoqKlxuICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheVxuICAgKiBAdHlwZSBBcnJheVxuICAgKi9cbiAgY29weUFycmF5OmZ1bmN0aW9uKCBhcnJheSApe1xuXG4gICAgdmFyIG5ld0FycmF5ID0gW107XG5cbiAgICBmb3IgKCB2YXIgaSA9IDA7IGk8YXJyYXkubGVuZ3RoOyBpKysgKSBuZXdBcnJheVtpXSA9IGFycmF5W2ldO1xuICAgIHJldHVybiBuZXdBcnJheTtcbiAgfSxcblxuICAvKipcbiAgICogQHBhcmFtIHtTdHJpbmd9IHRhZ05hbWVcbiAgICovXG4gIGNyZWF0ZUVsZW1lbnQ6ZnVuY3Rpb24oIHRhZ05hbWUgKXtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggdGFnTmFtZSApO1xuICB9LFxuXG4gIERBVEFfS0VZOmd1aWQoKSxcblxuICAvKipcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxcbiAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICAgKiBAcGFyYW0geyp9IHZhbFxuICAgKi9cbiAgZGF0YTpmdW5jdGlvbiggZWwsIGtleSwgdmFsICl7XG4gICAgdmFyIERBVEFfS0VZID0gdGhpcy5EQVRBX0tFWTtcbiAgICB2YXIgZGF0YSA9IGVsW0RBVEFfS0VZXT8gZWxbREFUQV9LRVldIDogZWxbREFUQV9LRVldID0ge307XG5cbiAgICBpZiAoIGFyZ3VtZW50cy5sZW5ndGggPT09IDMgKSB7XG4gICAgICBkYXRhW2tleV0gPSB2YWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBkYXRhW2tleV07XG4gICAgfVxuICB9LFxuXG4gIC8qKiBcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxcbiAgICogQHR5cGUgT2JqZWN0XG4gICAqL1xuICBnZXRDb250ZW50V2luZG93QnlFbDpmdW5jdGlvbiggZWwgKXtcbiAgXG4gICAgcmV0dXJuIHV0aWwuaXNFbGVtZW50KCBlbCApID8gZWwuY29udGVudFdpbmRvdzogZWw7IFxuICB9LFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge1dpbmRvd30gd2luXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBvcmlnaW5cbiAgICovXG4gIHBvc3RNZXNzYWdlOmZ1bmN0aW9uKCB3aW4sIGRhdGEsIG9yaWdpbiApe1xuICAgIHdpbi5wb3N0TWVzc2FnZSggSlNPTi5zdHJpbmdpZnkoIGRhdGEgKSwgb3JpZ2luICk7XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IHV0aWw7XG5cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvanMvdXRpbC5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFDQTtBQUNBOzs7OztBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBOzs7O0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTs7Ozs7QUFLQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBL0hBO0FBQ0E7QUFpSUEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.processorBuilder = exports.buildFrameCaller = exports.buildMessageEvent = undefined;\n\nvar _util = __webpack_require__(0);\n\nvar _util2 = _interopRequireDefault(_util);\n\nvar _guid = __webpack_require__(3);\n\nvar _guid2 = _interopRequireDefault(_guid);\n\nvar _urlUtils = __webpack_require__(14);\n\nvar _urlUtils2 = _interopRequireDefault(_urlUtils);\n\nvar _buildDeferred = __webpack_require__(2);\n\nvar _buildDeferred2 = _interopRequireDefault(_buildDeferred);\n\nvar _config = __webpack_require__(4);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * @param {String} type\n * @param {Object} data\n * @param {String} id\n * @param {Object} extraAttrs\n */\nvar buildMessageEvent = function buildMessageEvent(type, direction, data, id, extraAttrs) {\n  var infoData = data || {};\n  var _id = id ? id : (0, _guid2.default)();\n  var _extraAttrs = extraAttrs || {};\n  var defaults = {};\n  defaults[_config.FRAME_OBSERVER] = true;\n  return _util2.default.clone({ type: type, data: infoData, id: _id, timestamp: +new Date(), direction: direction }, _extraAttrs, defaults);\n};\n\n/**\n * @param {String} eventType\n * @param {Object} extraAttrs\n */\nvar buildFrameCaller = function buildFrameCaller(eventType, extraAttrs) {\n\n  /**\n   * @param {HTMLElement} el\n   * @type Deferred\n   */\n  return function (el) {\n\n    var deferred = (0, _buildDeferred2.default)();\n    var origin;\n    var contentWindow;\n    var msgEvt = buildMessageEvent(eventType, 'send', { params: _util2.default.copyArray(arguments).slice(1) }, null, extraAttrs);\n    this.evtMapping[msgEvt.id] = {\n      el: el,\n      id: msgEvt.id,\n      deferred: deferred\n    };\n\n    origin = _urlUtils2.default.getOriginByFrameEl(el);\n    contentWindow = _util2.default.getContentWindowByEl(el);\n    _util2.default.postMessage(contentWindow, msgEvt, origin);\n\n    return deferred;\n  };\n};\n\n/**\n * @namespace\n */\nvar processorBuilder = {\n\n  deferredSendResp: function deferredSendResp() {\n\n    /**\n     * @param {Event} msgEvt\n     */\n    return function (msgEvt) {\n      var callMethodName = 'reject';\n      var frameObserver = this.frameObserver;\n      var respTmp = frameObserver.evtMapping[msgEvt.id];\n      delete frameObserver.evtMapping[msgEvt.id];\n      if (msgEvt.deferredState === 'done') callMethodName = 'resolve';\n      //ignore it when observer is not sender\n      if (respTmp) respTmp.deferred[callMethodName](msgEvt.data);\n    };\n  },\n\n  deferredRecv: function deferredRecv() {\n\n    /**\n     * @param {Event} msgEvt\n     * @param {Object} source\n     * @param {String} origin\n     * @param {Deferred} deferred\n     */\n    return function (msgEvt, source, origin, deferred) {\n\n      var buildPostingOrigin = function buildPostingOrigin(deferredState) {\n\n        return function () {\n          var respMsgEvt = buildMessageEvent(msgEvt.type, 'recv', { result: arguments }, msgEvt.id, { deferredState: deferredState });\n          _util2.default.postMessage(source, respMsgEvt, origin);\n        };\n      };\n      deferred.done(buildPostingOrigin('done'));\n      deferred.fail(buildPostingOrigin('fail'));\n    };\n  }\n};\n\nexports.buildMessageEvent = buildMessageEvent;\nexports.buildFrameCaller = buildFrameCaller;\nexports.processorBuilder = processorBuilder;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvYnVpbGRlci5qcz9jNmE5Il0sInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IHV0aWwgZnJvbSAnLi91dGlsJztcbmltcG9ydCBndWlkIGZyb20gJy4vZ3VpZCc7XG5pbXBvcnQgdXJsVXRpbHMgZnJvbSAnLi91cmxVdGlscyc7XG5pbXBvcnQgRGVmZXJyZWQgZnJvbSAnLi9idWlsZERlZmVycmVkJztcbmltcG9ydCB7RlJBTUVfT0JTRVJWRVJ9IGZyb20gJy4vY29uZmlnJzsgXG5cbi8qKlxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gKiBAcGFyYW0ge1N0cmluZ30gaWRcbiAqIEBwYXJhbSB7T2JqZWN0fSBleHRyYUF0dHJzXG4gKi9cbnZhciBidWlsZE1lc3NhZ2VFdmVudCA9IGZ1bmN0aW9uKCB0eXBlLCBkaXJlY3Rpb24sIGRhdGEsIGlkLCBleHRyYUF0dHJzICl7XG4gIHZhciBpbmZvRGF0YSA9IGRhdGEgfHwge307XG4gIHZhciBfaWQgPSBpZCA/IGlkOiBndWlkKCk7XG4gIHZhciBfZXh0cmFBdHRycyA9IGV4dHJhQXR0cnMgfHwge307XG4gIHZhciBkZWZhdWx0cyA9IHt9O1xuICBkZWZhdWx0c1tGUkFNRV9PQlNFUlZFUl0gPSB0cnVlO1xuICByZXR1cm4gdXRpbC5jbG9uZSgge3R5cGU6dHlwZSwgZGF0YTppbmZvRGF0YSwgaWQ6X2lkLCB0aW1lc3RhbXA6K25ldyBEYXRlKCksIGRpcmVjdGlvbjpkaXJlY3Rpb259LCBfZXh0cmFBdHRycywgZGVmYXVsdHMgKTtcbn07XG5cbi8qKlxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50VHlwZVxuICogQHBhcmFtIHtPYmplY3R9IGV4dHJhQXR0cnNcbiAqL1xudmFyIGJ1aWxkRnJhbWVDYWxsZXIgPSBmdW5jdGlvbiggZXZlbnRUeXBlLCBleHRyYUF0dHJzICl7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsXG4gICAqIEB0eXBlIERlZmVycmVkXG4gICAqL1xuICByZXR1cm4gZnVuY3Rpb24oIGVsICl7XG5cbiAgICB2YXIgZGVmZXJyZWQgPSBEZWZlcnJlZCgpO1xuICAgIHZhciBvcmlnaW47XG4gICAgdmFyIGNvbnRlbnRXaW5kb3c7XG4gICAgdmFyIG1zZ0V2dCA9IGJ1aWxkTWVzc2FnZUV2ZW50KCBldmVudFR5cGUsICdzZW5kJywge3BhcmFtczp1dGlsLmNvcHlBcnJheSggYXJndW1lbnRzICkuc2xpY2UoMSl9LCBudWxsLCBleHRyYUF0dHJzICk7XG4gICAgdGhpcy5ldnRNYXBwaW5nW21zZ0V2dC5pZF0gPSB7XG4gICAgICBlbDplbCxcbiAgICAgIGlkOm1zZ0V2dC5pZCxcbiAgICAgIGRlZmVycmVkOmRlZmVycmVkXG4gICAgfTtcblxuICAgIG9yaWdpbiA9IHVybFV0aWxzLmdldE9yaWdpbkJ5RnJhbWVFbCggZWwgKTtcbiAgICBjb250ZW50V2luZG93ID0gdXRpbC5nZXRDb250ZW50V2luZG93QnlFbCggZWwgKTtcbiAgICB1dGlsLnBvc3RNZXNzYWdlKCBjb250ZW50V2luZG93LCBtc2dFdnQsIG9yaWdpbiApO1xuXG4gICAgcmV0dXJuIGRlZmVycmVkO1xuICB9XG59O1xuXG5cbi8qKlxuICogQG5hbWVzcGFjZVxuICovXG52YXIgcHJvY2Vzc29yQnVpbGRlciA9IHtcblxuICBkZWZlcnJlZFNlbmRSZXNwOmZ1bmN0aW9uKCl7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0V2ZW50fSBtc2dFdnRcbiAgICAgKi9cbiAgICByZXR1cm4gZnVuY3Rpb24oIG1zZ0V2dCApIHtcbiAgICAgIHZhciBjYWxsTWV0aG9kTmFtZSA9ICdyZWplY3QnO1xuICAgICAgdmFyIGZyYW1lT2JzZXJ2ZXIgPSB0aGlzLmZyYW1lT2JzZXJ2ZXI7XG4gICAgICB2YXIgcmVzcFRtcCA9IGZyYW1lT2JzZXJ2ZXIuZXZ0TWFwcGluZ1ttc2dFdnQuaWRdO1xuICAgICAgZGVsZXRlIGZyYW1lT2JzZXJ2ZXIuZXZ0TWFwcGluZ1ttc2dFdnQuaWRdO1xuICAgICAgaWYgKCBtc2dFdnQuZGVmZXJyZWRTdGF0ZSA9PT0gJ2RvbmUnICkgY2FsbE1ldGhvZE5hbWUgPSAncmVzb2x2ZSc7XG4gICAgICAvL2lnbm9yZSBpdCB3aGVuIG9ic2VydmVyIGlzIG5vdCBzZW5kZXJcbiAgICAgIGlmIChyZXNwVG1wKSByZXNwVG1wLmRlZmVycmVkW2NhbGxNZXRob2ROYW1lXShtc2dFdnQuZGF0YSk7XG4gICAgfTtcbiAgfSxcblxuICBkZWZlcnJlZFJlY3Y6ZnVuY3Rpb24oKXtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7RXZlbnR9IG1zZ0V2dFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2VcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gb3JpZ2luXG4gICAgICogQHBhcmFtIHtEZWZlcnJlZH0gZGVmZXJyZWRcbiAgICAgKi9cbiAgICByZXR1cm4gZnVuY3Rpb24oIG1zZ0V2dCwgc291cmNlLCBvcmlnaW4sIGRlZmVycmVkICl7XG5cbiAgICAgIHZhciBidWlsZFBvc3RpbmdPcmlnaW4gPSBmdW5jdGlvbiggZGVmZXJyZWRTdGF0ZSApe1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpe1xuICAgICAgICAgIHZhciByZXNwTXNnRXZ0ID0gYnVpbGRNZXNzYWdlRXZlbnQoIG1zZ0V2dC50eXBlLCAncmVjdicsIHtyZXN1bHQ6YXJndW1lbnRzfSwgbXNnRXZ0LmlkLCB7ZGVmZXJyZWRTdGF0ZTpkZWZlcnJlZFN0YXRlfSApO1xuICAgICAgICAgIHV0aWwucG9zdE1lc3NhZ2UoIHNvdXJjZSwgcmVzcE1zZ0V2dCwgb3JpZ2luICk7XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgICAgZGVmZXJyZWQuZG9uZShidWlsZFBvc3RpbmdPcmlnaW4oICdkb25lJyApKTtcbiAgICAgIGRlZmVycmVkLmZhaWwoYnVpbGRQb3N0aW5nT3JpZ2luKCAnZmFpbCcgKSk7XG4gICAgfTtcbiAgfVxufTtcblxuZXhwb3J0IHtidWlsZE1lc3NhZ2VFdmVudCwgYnVpbGRGcmFtZUNhbGxlciwgcHJvY2Vzc29yQnVpbGRlcn07XG5cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvanMvYnVpbGRlci5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUNBOzs7Ozs7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF0Q0E7QUFDQTtBQXdDQTtBQUFBO0FBQUEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n/**\n * @function\n * @type Promise\n */\nvar buildDeferred = function buildDeferred() {\n  var reject, resolve;\n  var promise = new Promise(function (res, rej) {\n    resolve = res;\n    reject = rej;\n  });\n  promise.resolve = resolve;\n  promise.reject = reject;\n\n  var toArray = function toArray(val) {\n    return Array.prototype.slice.call(val, 0);\n  };\n\n  promise.resolve = function () {\n    resolve.call(null, toArray(arguments));\n  };\n\n  promise.reject = function () {\n    reject.call(null, toArray(arguments));\n  };\n\n  promise.always = function (always) {\n    promise.then(function (val) {\n\n      always.apply(null, toArray(val));\n    }, function () {\n\n      always.apply(null, toArray(val));\n    });\n  };\n\n  promise.done = function (done) {\n    promise.then(function (val) {\n      done.apply(null, toArray(val));\n    });\n  };\n\n  promise.fail = function (fail) {\n    promise.then(function () {}, function (val) {\n      fail.apply(null, toArray(val));\n    });\n  };\n\n  return promise;\n};\n\nexports.default = buildDeferred;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvYnVpbGREZWZlcnJlZC5qcz82M2ZlIl0sInNvdXJjZXNDb250ZW50IjpbIlxuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEB0eXBlIFByb21pc2VcbiAqL1xudmFyIGJ1aWxkRGVmZXJyZWQgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHJlamVjdCwgcmVzb2x2ZTtcbiAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiggcmVzLCByZWogKXtcbiAgICByZXNvbHZlID0gcmVzO1xuICAgIHJlamVjdCA9IHJlajtcbiAgfSk7XG4gIHByb21pc2UucmVzb2x2ZSA9IHJlc29sdmU7XG4gIHByb21pc2UucmVqZWN0ID0gcmVqZWN0O1xuXG4gIHZhciB0b0FycmF5ID0gZnVuY3Rpb24odmFsKXtcbiAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodmFsLCAwKTtcbiAgfTtcblxuICBwcm9taXNlLnJlc29sdmUgPSBmdW5jdGlvbigpe1xuICAgIHJlc29sdmUuY2FsbChudWxsLCB0b0FycmF5KGFyZ3VtZW50cykpO1xuICB9O1xuXG4gIHByb21pc2UucmVqZWN0ID0gZnVuY3Rpb24oKXtcbiAgICByZWplY3QuY2FsbChudWxsLCB0b0FycmF5KGFyZ3VtZW50cykpO1xuICB9O1xuXG4gIHByb21pc2UuYWx3YXlzID0gZnVuY3Rpb24oYWx3YXlzKXtcbiAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsKXtcblxuICAgICAgYWx3YXlzLmFwcGx5KG51bGwsIHRvQXJyYXkodmFsKSk7XG4gICAgfSxcbiAgICBmdW5jdGlvbigpe1xuXG4gICAgICBhbHdheXMuYXBwbHkobnVsbCwgdG9BcnJheSh2YWwpKTtcbiAgICB9KTtcbiAgfTtcblxuICBwcm9taXNlLmRvbmUgPSBmdW5jdGlvbihkb25lKXtcbiAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsKXtcbiAgICAgIGRvbmUuYXBwbHkobnVsbCwgdG9BcnJheSh2YWwpKTtcbiAgICB9KTtcbiAgfTtcblxuICBwcm9taXNlLmZhaWwgPSBmdW5jdGlvbihmYWlsKXtcbiAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24oKXt9LGZ1bmN0aW9uKHZhbCl7XG4gICAgICBmYWlsLmFwcGx5KG51bGwsIHRvQXJyYXkodmFsKSk7XG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIHByb21pc2U7XG59O1xuXG5cbmV4cG9ydCBkZWZhdWx0IGJ1aWxkRGVmZXJyZWQ7XG5cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvanMvYnVpbGREZWZlcnJlZC5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBIiwic291cmNlUm9vdCI6IiJ9");

/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar guid = function guid() {\n  var s4 = function s4() {\n    return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\n  };\n  return s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();\n};\n\nexports.default = guid;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvZ3VpZC5qcz8zMDVhIl0sInNvdXJjZXNDb250ZW50IjpbIlxudmFyIGd1aWQgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHM0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoKDEgKyBNYXRoLnJhbmRvbSgpKSAqIDB4MTAwMDApXG4gICAgICAudG9TdHJpbmcoMTYpXG4gICAgICAuc3Vic3RyaW5nKDEpO1xuICB9XG4gIHJldHVybiBzNCgpICsgczQoKSArICctJyArIHM0KCkgKyAnLScgKyBzNCgpICsgJy0nICtcbiAgICBzNCgpICsgJy0nICsgczQoKSArIHM0KCkgKyBzNCgpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBndWlkO1xuXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2pzL2d1aWQuanMiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n//var doc = window.document;\n//var Deferred = buildDeferred;\nvar FRAME_OBSERVER = exports.FRAME_OBSERVER = \"_FRAME_OBSERVER_\";//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvY29uZmlnLmpzPzA3MWEiXSwic291cmNlc0NvbnRlbnQiOlsiXG4vL3ZhciBkb2MgPSB3aW5kb3cuZG9jdW1lbnQ7XG4vL3ZhciBEZWZlcnJlZCA9IGJ1aWxkRGVmZXJyZWQ7XG5leHBvcnQgY29uc3QgRlJBTUVfT0JTRVJWRVIgPSBcIl9GUkFNRV9PQlNFUlZFUl9cIjtcblxuXG5cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvanMvY29uZmlnLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _frameObserver = __webpack_require__(8);\n\nvar _frameObserver2 = _interopRequireDefault(_frameObserver);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _frameObserver2.default;\n\nmodule.exports = _frameObserver2.default;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvaW5kZXguanM/OTlhOCJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCBmcmFtZU9ic2VydmVyIGZyb20gJy4vZnJhbWVPYnNlcnZlcic7XG5leHBvcnQgZGVmYXVsdCBmcmFtZU9ic2VydmVyO1xubW9kdWxlLmV4cG9ydHMgPSBmcmFtZU9ic2VydmVyO1xuXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2pzL2luZGV4LmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFDQTtBQUNBOzs7Ozs7O0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _util = __webpack_require__(0);\n\nvar _util2 = _interopRequireDefault(_util);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * @class\n */\nvar EventObserver = function EventObserver() {\n\n  this.events = {};\n};\n\nEventObserver.prototype = {\n\n  /**\n   * @param {String} name\n   * @param {function} func\n   * @param {Object} opts\n   * @param {*} opts.target\n   * @param {boolean} opts.once is a inner variable\n   */\n  on: function on(name, func, opts) {\n    var opts = opts || {};\n\n    if (!this.events[name]) this.events[name] = [];\n\n    this.events[name].push({\n      func: func,\n      once: opts.once || false,\n      target: opts.target || null\n    });\n  },\n\n  /**\n   * @param {String} name\n   * @param {function} func\n   */\n  once: function once(name, func) {\n\n    this.on(name, func, { once: true });\n  },\n\n  /**\n   * @param {String} name\n   * @param {function} func\n   * @param {*} target\n   */\n  off: function off(name, func, target) {\n\n    var eventList = this.events[name] || [];\n\n    if (arguments.length === 1) {\n\n      delete this.events[name];\n    } else {\n\n      for (var i in eventList) {\n        var evt = eventList[i];\n\n        if (evt.func === func && (evt.target === null || evt.target === target) || func === undefined && evt.target === target) {\n\n          eventList.splice(i, 1);\n          break;\n        }\n      }\n    }\n  },\n\n  /**\n   * @param {String} eventName\n   * @type Number\n   */\n  getEventNumber: function getEventNumber(eventName) {\n\n    return this.events[eventName] ? this.events[eventName].length : 0;\n  },\n\n  /**\n   * @param {String} name\n   */\n  /**\n   * @param {Objects} opts\n   * @param {String} opts.name\n   * @param {*} opts.target\n   */\n  trigger: function trigger(opts) {\n    var name,\n        target,\n        timeStamp = +new Date();\n\n    if (_util2.default.isString(opts)) {\n      name = opts;\n    } else {\n      name = opts.name;\n      target = opts.target || null;\n    }\n\n    var eventList = this.events[name] || [],\n        i;\n    var originParams = _util2.default.copyArray(arguments);\n\n    if (target) {\n\n      eventList = function (eventList, target) {\n        var filterList = [];\n\n        for (var i in eventList) {\n          if (eventList[i].target === target) filterList.push(eventList[i]);\n        }\n\n        return filterList;\n      }(eventList, target);\n    }\n\n    for (i in eventList) {\n\n      var evt = {\n        type: name,\n        timeStamp: timeStamp\n      };\n\n      var params = originParams.slice(1);\n\n      params.unshift(evt);\n      eventList[i].func.apply(null, params);\n    }\n\n    for (i = 0; i < eventList.length; i++) {\n\n      if (eventList[i].once) {\n\n        target ? this.off(name, opts.func, opts.target) : this.off(name, opts.func);\n      }\n    }\n  }\n};\n\nexports.default = EventObserver;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvRXZlbnRPYnNlcnZlci5qcz9lODU0Il0sInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IHV0aWwgZnJvbSAnLi91dGlsJztcblxuLyoqXG4gKiBAY2xhc3NcbiAqL1xudmFyIEV2ZW50T2JzZXJ2ZXIgPSBmdW5jdGlvbigpe1xuXG4gIHRoaXMuZXZlbnRzID0ge307XG59O1xuXG5FdmVudE9ic2VydmVyLnByb3RvdHlwZSA9IHtcblxuICAvKipcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gZnVuY1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0c1xuICAgKiBAcGFyYW0geyp9IG9wdHMudGFyZ2V0XG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0cy5vbmNlIGlzIGEgaW5uZXIgdmFyaWFibGVcbiAgICovXG4gIG9uOmZ1bmN0aW9uKCBuYW1lLCBmdW5jLCBvcHRzICl7XG4gICAgdmFyIG9wdHMgPSBvcHRzIHx8IHt9O1xuXG4gICAgaWYgKCAhdGhpcy5ldmVudHNbbmFtZV0gKSB0aGlzLmV2ZW50c1tuYW1lXSA9IFtdO1xuXG4gICAgdGhpcy5ldmVudHNbbmFtZV0ucHVzaCh7XG4gICAgICBmdW5jOmZ1bmMsXG4gICAgICBvbmNlOm9wdHMub25jZSB8fCBmYWxzZSxcbiAgICAgIHRhcmdldDpvcHRzLnRhcmdldCB8fCBudWxsXG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGZ1bmNcbiAgICovXG4gIG9uY2U6ZnVuY3Rpb24oIG5hbWUsIGZ1bmMgKXtcblxuICAgIHRoaXMub24oIG5hbWUsIGZ1bmMsIHtvbmNlOnRydWV9ICk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGZ1bmNcbiAgICogQHBhcmFtIHsqfSB0YXJnZXRcbiAgICovXG4gIG9mZjpmdW5jdGlvbiggbmFtZSwgZnVuYywgdGFyZ2V0ICl7XG5cbiAgICB2YXIgZXZlbnRMaXN0ID0gdGhpcy5ldmVudHNbbmFtZV0gfHwgW107XG5cbiAgICBpZiAoIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgKSB7XG5cbiAgICAgIGRlbGV0ZSB0aGlzLmV2ZW50c1tuYW1lXTtcblxuICAgIH0gZWxzZSB7XG5cbiAgICAgIGZvciAoIHZhciBpIGluIGV2ZW50TGlzdCApIHtcbiAgICAgICAgdmFyIGV2dCA9IGV2ZW50TGlzdFtpXTtcblxuICAgICAgICBpZiAoIChldnQuZnVuYyA9PT0gZnVuYyAmJiAoIGV2dC50YXJnZXQgPT09IG51bGwgfHwgZXZ0LnRhcmdldCA9PT0gdGFyZ2V0ICkpIHx8XG4gICAgICAgICAgICAgKGZ1bmMgPT09IHVuZGVmaW5lZCAmJiBldnQudGFyZ2V0ID09PSB0YXJnZXQgKVxuICAgICAgICAgICApIHtcblxuICAgICAgICAgIGV2ZW50TGlzdC5zcGxpY2UoIGksIDEgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZVxuICAgKiBAdHlwZSBOdW1iZXJcbiAgICovXG4gIGdldEV2ZW50TnVtYmVyOmZ1bmN0aW9uKCBldmVudE5hbWUgKXtcblxuICAgIHJldHVybiB0aGlzLmV2ZW50c1tldmVudE5hbWVdPyB0aGlzLmV2ZW50c1tldmVudE5hbWVdLmxlbmd0aCA6IDA7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gICAqL1xuICAvKipcbiAgICogQHBhcmFtIHtPYmplY3RzfSBvcHRzXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBvcHRzLm5hbWVcbiAgICogQHBhcmFtIHsqfSBvcHRzLnRhcmdldFxuICAgKi9cbiAgdHJpZ2dlcjpmdW5jdGlvbiggb3B0cyApe1xuICAgIHZhciBuYW1lLCB0YXJnZXQsIHRpbWVTdGFtcCA9ICgrbmV3IERhdGUoKSk7XG5cbiAgICBpZiAoIHV0aWwuaXNTdHJpbmcoIG9wdHMgKSApIHtcbiAgICAgIG5hbWUgPSBvcHRzO1xuICAgIH0gZWxzZSB7XG4gICAgICBuYW1lID0gb3B0cy5uYW1lO1xuICAgICAgdGFyZ2V0ID0gb3B0cy50YXJnZXQgfHwgbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgZXZlbnRMaXN0ID0gdGhpcy5ldmVudHNbbmFtZV0gfHwgW10sIGk7XG4gICAgdmFyIG9yaWdpblBhcmFtcyA9IHV0aWwuY29weUFycmF5KCBhcmd1bWVudHMgKTtcblxuICAgIGlmICggdGFyZ2V0ICkge1xuXG4gICAgICBldmVudExpc3QgPSAoZnVuY3Rpb24oIGV2ZW50TGlzdCwgdGFyZ2V0ICl7XG4gICAgICAgIHZhciBmaWx0ZXJMaXN0ID0gW107XG5cbiAgICAgICAgZm9yICggdmFyIGkgaW4gZXZlbnRMaXN0ICkge1xuICAgICAgICAgIGlmICggZXZlbnRMaXN0W2ldLnRhcmdldCA9PT0gdGFyZ2V0ICkgZmlsdGVyTGlzdC5wdXNoKCBldmVudExpc3RbaV0gKTtcbiAgICAgICAgfSAgICAgICAgXG5cbiAgICAgICAgcmV0dXJuIGZpbHRlckxpc3Q7XG4gICAgICB9KSggZXZlbnRMaXN0LCB0YXJnZXQgKTtcbiAgICB9XG5cbiAgICBmb3IgKCBpIGluIGV2ZW50TGlzdCApIHtcblxuICAgICAgdmFyIGV2dCA9IHtcbiAgICAgICAgdHlwZTpuYW1lLFxuICAgICAgICB0aW1lU3RhbXA6dGltZVN0YW1wXG4gICAgICB9O1xuXG4gICAgICB2YXIgcGFyYW1zID0gb3JpZ2luUGFyYW1zLnNsaWNlKDEpO1xuXG4gICAgICBwYXJhbXMudW5zaGlmdCggZXZ0ICk7XG4gICAgICBldmVudExpc3RbaV0uZnVuYy5hcHBseSggbnVsbCwgcGFyYW1zIClcbiAgICB9XG5cbiAgICBmb3IgKCBpID0gMDsgaSA8IGV2ZW50TGlzdC5sZW5ndGggOyBpKysgKSB7XG5cbiAgICAgIGlmICggZXZlbnRMaXN0W2ldLm9uY2UgKSB7XG5cbiAgICAgICAgdGFyZ2V0PyB0aGlzLm9mZiggbmFtZSwgb3B0cy5mdW5jLCBvcHRzLnRhcmdldCApIDogdGhpcy5vZmYoIG5hbWUsIG9wdHMuZnVuYyApO1xuICAgICAgfVxuICAgIH1cblxuICB9XG59O1xuXG5cbmV4cG9ydCBkZWZhdWx0IEV2ZW50T2JzZXJ2ZXI7XG5cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvanMvRXZlbnRPYnNlcnZlci5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ0E7QUFDQTs7Ozs7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTs7Ozs7QUFLQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBM0hBO0FBQ0E7QUE4SEEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _buildDeferred = __webpack_require__(2);\n\nvar _buildDeferred2 = _interopRequireDefault(_buildDeferred);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * @class\n */\nvar StateManager = function StateManager() {\n\n  this.stateDeferredMap = {};\n};\n\nStateManager.prototype = {\n\n  /**\n   * @param {String} stateName\n   * @param {Deferred} deferred\n   */\n  assign: function assign(stateName, deferred) {\n    var stateDeferred = this.get(stateName);\n    stateDeferred.done(deferred.resolve.bind(deferred));\n    stateDeferred.fail(deferred.reject.bind(deferred));\n  },\n\n  /**\n   * @param {String} stateName\n   * @type Deferred\n   */\n  get: function get(stateName) {\n    var deferred = this.stateDeferredMap[stateName];\n    return deferred ? deferred : this.stateDeferredMap[stateName] = (0, _buildDeferred2.default)();\n  }\n};\n\nexports.default = StateManager;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvU3RhdGVNYW5hZ2VyLmpzPzM5YWIiXSwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQgRGVmZXJyZWQgZnJvbSAnLi9idWlsZERlZmVycmVkJztcblxuLyoqXG4gKiBAY2xhc3NcbiAqL1xudmFyIFN0YXRlTWFuYWdlciA9IGZ1bmN0aW9uKCl7XG5cbiAgdGhpcy5zdGF0ZURlZmVycmVkTWFwID0ge307XG59O1xuXG5TdGF0ZU1hbmFnZXIucHJvdG90eXBlID0ge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gc3RhdGVOYW1lXG4gICAqIEBwYXJhbSB7RGVmZXJyZWR9IGRlZmVycmVkXG4gICAqL1xuICBhc3NpZ246ZnVuY3Rpb24oIHN0YXRlTmFtZSwgZGVmZXJyZWQgKXtcbiAgICB2YXIgc3RhdGVEZWZlcnJlZCA9IHRoaXMuZ2V0KCBzdGF0ZU5hbWUgKTtcbiAgICBzdGF0ZURlZmVycmVkLmRvbmUoZGVmZXJyZWQucmVzb2x2ZS5iaW5kKGRlZmVycmVkKSk7XG4gICAgc3RhdGVEZWZlcnJlZC5mYWlsKGRlZmVycmVkLnJlamVjdC5iaW5kKGRlZmVycmVkKSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzdGF0ZU5hbWVcbiAgICogQHR5cGUgRGVmZXJyZWRcbiAgICovXG4gIGdldDpmdW5jdGlvbiggc3RhdGVOYW1lICl7XG4gICAgdmFyIGRlZmVycmVkID0gdGhpcy5zdGF0ZURlZmVycmVkTWFwW3N0YXRlTmFtZV07XG4gICAgcmV0dXJuIGRlZmVycmVkID8gZGVmZXJyZWQgOiB0aGlzLnN0YXRlRGVmZXJyZWRNYXBbc3RhdGVOYW1lXSA9IERlZmVycmVkKCk7XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IFN0YXRlTWFuYWdlcjtcblxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9qcy9TdGF0ZU1hbmFnZXIuanMiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUNBO0FBQ0E7Ozs7O0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBbkJBO0FBQ0E7QUFxQkEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),
/* 8 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _config = __webpack_require__(4);\n\nvar _util = __webpack_require__(0);\n\nvar _util2 = _interopRequireDefault(_util);\n\nvar _guid = __webpack_require__(3);\n\nvar _guid2 = _interopRequireDefault(_guid);\n\nvar _EventObserver = __webpack_require__(6);\n\nvar _EventObserver2 = _interopRequireDefault(_EventObserver);\n\nvar _StateManager = __webpack_require__(7);\n\nvar _StateManager2 = _interopRequireDefault(_StateManager);\n\nvar _EventMsgProcessor = __webpack_require__(9);\n\nvar _EventMsgProcessor2 = _interopRequireDefault(_EventMsgProcessor);\n\nvar _RegisterMsgProcessor = __webpack_require__(11);\n\nvar _RegisterMsgProcessor2 = _interopRequireDefault(_RegisterMsgProcessor);\n\nvar _StateProcessor = __webpack_require__(12);\n\nvar _StateProcessor2 = _interopRequireDefault(_StateProcessor);\n\nvar _UnregisterMsgProcessor = __webpack_require__(13);\n\nvar _UnregisterMsgProcessor2 = _interopRequireDefault(_UnregisterMsgProcessor);\n\nvar _MethodMsgProcessor = __webpack_require__(10);\n\nvar _MethodMsgProcessor2 = _interopRequireDefault(_MethodMsgProcessor);\n\nvar _builder = __webpack_require__(1);\n\nvar _buildDeferred = __webpack_require__(2);\n\nvar _buildDeferred2 = _interopRequireDefault(_buildDeferred);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * @class\n */\nvar FrameObserver = function FrameObserver() {\n\n  this.evtMapping = {};\n  this.eventObservers = {};\n  this.registerEventObserver = new _EventObserver2.default();\n  this.stateManager = new _StateManager2.default();\n  this.methods_ = {};\n\n  this.msgProcessors = {\n    method: new _MethodMsgProcessor2.default(this),\n    registerEvent: new _RegisterMsgProcessor2.default(this),\n    unregisterEvent: new _UnregisterMsgProcessor2.default(this),\n    event: new _EventMsgProcessor2.default(this),\n    state: new _StateProcessor2.default(this)\n  };\n  window.addEventListener('message', this.onMessage.bind(this));\n};\n\nFrameObserver.prototype = {\n\n  /**\n   * @param {Event} evt\n   */\n  onMessage: function onMessage(evt) {\n    var origin = evt.origin,\n        msgEvt;\n    try {\n      msgEvt = JSON.parse(evt.data);\n    } catch (e) {\n      msgEvt = null;\n    }\n\n    //event filter if source is not sended from FrameObserver\n    if (_util2.default.isObject(msgEvt) && _config.FRAME_OBSERVER in msgEvt) {\n      var deferred = (0, _buildDeferred2.default)();\n      var source = evt.source;\n\n      //console.log( msgEvt, evt );\n      //console.log( evt );\n\n      var msgProcessor = this.msgProcessors[msgEvt.type];\n\n      if (msgEvt.direction == 'send') msgProcessor.onRecv(msgEvt, source, origin, deferred);else msgProcessor.onSendResp(msgEvt, origin, deferred);\n    }\n  },\n\n  /**\n   * @private \n   * @param {HTMLElement} el\n   * @type String\n   */\n  getFrameEventId_: function getFrameEventId_(el) {\n    var frameEventId = \"window\";\n\n    if (_util2.default.isElement(el)) {\n      frameEventId = function (id) {\n        var frameEventId = id ? id : (0, _guid2.default)();\n        _util2.default.data(el, 'frameEventId', frameEventId);\n        return frameEventId;\n      }(_util2.default.data(el, 'frameEventId'));\n    }\n    return frameEventId;\n  },\n\n  /**\n   * @private\n   * @param {String} frameEventId\n   * @type Array[EventObserver]\n   */\n  getFrameObserverList_: function getFrameObserverList_(frameEventId) {\n\n    return !this.eventObservers[frameEventId] ? this.eventObservers[frameEventId] = [] : this.eventObservers[frameEventId];\n  },\n\n  /**\n   * @private\n   * @param {HTMLElement} el\n   * @type EventObserver\n   */\n  getObserver_: function getObserver_(el) {\n\n    var frameEventId = this.getFrameEventId_(el);\n    var frameObserverList = this.getFrameObserverList_(frameEventId);\n    var observer;\n\n    for (var i in frameObserverList) {\n\n      if (frameObserverList[i].el === el) {\n        observer = frameObserverList[i].observer;\n        break;\n      }\n    }\n\n    if (!observer) {\n\n      observer = new _EventObserver2.default();\n\n      frameObserverList.push({\n        el: el,\n        observer: observer\n      });\n    }\n\n    return observer;\n  },\n\n  /**\n   * @param {HTMLElement} el\n   * @param {String} eventName\n   * @param {function} func\n   */\n  on: function on(el, eventName, func) {\n\n    var observer = this.getObserver_(el);\n    var frameEventId = this.getFrameEventId_(el);\n\n    observer.on(eventName, func);\n\n    if (observer.getEventNumber(eventName) === 1) this.registerEvent(el, { eventName: eventName, frameEventId: frameEventId });\n  },\n\n  /**\n   * @param {HTMLElement} el\n   * @param {String} eventName\n   * @param {function} func\n   */\n  off: function off(el, eventName, func) {\n\n    var observer = this.getObserver_(el);\n    var frameEventId = this.getFrameEventId_(el);\n\n    observer.off(eventName, func);\n\n    if (observer.getEventNumber(eventName) === 0) this.unregisterEvent(el, { eventName: eventName, frameEventId: frameEventId });\n  },\n\n  /**\n   * @param {String} name\n   */\n  trigger: function trigger(name) {\n\n    this.registerEventObserver.trigger(name, _util2.default.copyArray(arguments).slice(1));\n  },\n\n  /**\n   * @param {HTMLElement} el\n   * @type Deferred\n   */\n  callMethod: (0, _builder.buildFrameCaller)('method'),\n\n  /**\n   * @param {HTMLElement} el\n   * @type Deferred\n   */\n  registerEvent: (0, _builder.buildFrameCaller)('registerEvent'),\n\n  /**\n   * @param {HTMLElement} el\n   * @type Deferred\n   */\n  unregisterEvent: (0, _builder.buildFrameCaller)('unregisterEvent'),\n\n  /**\n   * @param {Object} methods\n   */\n  registerMethods: function registerMethods(methods) {\n\n    for (var i in methods) {\n      this.methods_[i] = methods[i];\n    };\n  },\n\n  /**\n   * @param {String} stateName\n   */\n  resolveState: function resolveState(stateName) {\n\n    this.stateManager.get(stateName).resolve(_util2.default.copyArray(arguments).slice(1));\n  },\n\n  /**\n   * @param {String} stateName\n   */\n  rejectState: function rejectState(stateName) {\n\n    this.stateManager.get(stateName).reject(_util2.default.copyArray(arguments).slice(1));\n  },\n\n  /**\n   * @param {HTMLElement} el\n   * @param {String} stateName\n   * @type Deferred\n   */\n  readyState: (0, _builder.buildFrameCaller)('state')\n};\n\nvar frameObserver = new FrameObserver();\n\n//if ( typeof window !== \"undefined\" ) window.frameObserver = frameObserver;\n//if ( typeof module !== \"undefined\" ) module.exports = frameObserver;\n\nexports.default = frameObserver;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvZnJhbWVPYnNlcnZlci5qcz9jNzE2Il0sInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IHtGUkFNRV9PQlNFUlZFUn0gZnJvbSAnLi9jb25maWcnO1xuaW1wb3J0IHV0aWwgZnJvbSAnLi91dGlsJztcbmltcG9ydCBndWlkIGZyb20gJy4vZ3VpZCc7XG5pbXBvcnQgRXZlbnRPYnNlcnZlciBmcm9tICcuL0V2ZW50T2JzZXJ2ZXInO1xuaW1wb3J0IFN0YXRlTWFuYWdlciBmcm9tICcuL1N0YXRlTWFuYWdlcic7XG5pbXBvcnQgRXZlbnRNc2dQcm9jZXNzb3IgZnJvbSAnLi9wcm9jZXNzb3IvRXZlbnRNc2dQcm9jZXNzb3InO1xuaW1wb3J0IFJlZ2lzdGVyTXNnUHJvY2Vzc29yIGZyb20gJy4vcHJvY2Vzc29yL1JlZ2lzdGVyTXNnUHJvY2Vzc29yJztcbmltcG9ydCBTdGF0ZVByb2Nlc3NvciBmcm9tICcuL3Byb2Nlc3Nvci9TdGF0ZVByb2Nlc3Nvcic7XG5pbXBvcnQgVW5yZWdpc3Rlck1zZ1Byb2Nlc3NvciBmcm9tICcuL3Byb2Nlc3Nvci9VbnJlZ2lzdGVyTXNnUHJvY2Vzc29yJztcbmltcG9ydCBNZXRob2RNc2dQcm9jZXNzb3IgZnJvbSAnLi9wcm9jZXNzb3IvTWV0aG9kTXNnUHJvY2Vzc29yJztcbmltcG9ydCB7YnVpbGRGcmFtZUNhbGxlcn0gZnJvbSAnLi9idWlsZGVyJztcbmltcG9ydCBEZWZlcnJlZCBmcm9tICcuL2J1aWxkRGVmZXJyZWQnO1xuXG5cbi8qKlxuICogQGNsYXNzXG4gKi9cbnZhciBGcmFtZU9ic2VydmVyID0gZnVuY3Rpb24oKXtcblxuICB0aGlzLmV2dE1hcHBpbmcgPSB7fTtcbiAgdGhpcy5ldmVudE9ic2VydmVycyA9IHt9O1xuICB0aGlzLnJlZ2lzdGVyRXZlbnRPYnNlcnZlciA9IG5ldyBFdmVudE9ic2VydmVyKCk7XG4gIHRoaXMuc3RhdGVNYW5hZ2VyID0gbmV3IFN0YXRlTWFuYWdlcigpO1xuICB0aGlzLm1ldGhvZHNfID0ge307XG5cbiAgdGhpcy5tc2dQcm9jZXNzb3JzID0ge1xuICAgIG1ldGhvZDpuZXcgTWV0aG9kTXNnUHJvY2Vzc29yKCB0aGlzICksXG4gICAgcmVnaXN0ZXJFdmVudDpuZXcgUmVnaXN0ZXJNc2dQcm9jZXNzb3IoIHRoaXMgKSxcbiAgICB1bnJlZ2lzdGVyRXZlbnQ6bmV3IFVucmVnaXN0ZXJNc2dQcm9jZXNzb3IoIHRoaXMgKSxcbiAgICBldmVudDpuZXcgRXZlbnRNc2dQcm9jZXNzb3IoIHRoaXMgKSxcbiAgICBzdGF0ZTpuZXcgU3RhdGVQcm9jZXNzb3IoIHRoaXMgKVxuICB9O1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggJ21lc3NhZ2UnLCB0aGlzLm9uTWVzc2FnZS5iaW5kKCB0aGlzICkgKTtcbn07XG5cbkZyYW1lT2JzZXJ2ZXIucHJvdG90eXBlID0ge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0V2ZW50fSBldnRcbiAgICovXG4gIG9uTWVzc2FnZTpmdW5jdGlvbiggZXZ0ICl7XG4gICAgdmFyIG9yaWdpbiA9IGV2dC5vcmlnaW4sIG1zZ0V2dDtcbiAgICB0cnkge1xuICAgICAgbXNnRXZ0ID0gSlNPTi5wYXJzZSggZXZ0LmRhdGEgKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgIG1zZ0V2dCA9IG51bGw7XG4gICAgfVxuXG4gICAgLy9ldmVudCBmaWx0ZXIgaWYgc291cmNlIGlzIG5vdCBzZW5kZWQgZnJvbSBGcmFtZU9ic2VydmVyXG4gICAgaWYgKCB1dGlsLmlzT2JqZWN0KCBtc2dFdnQgKSAmJiBGUkFNRV9PQlNFUlZFUiBpbiBtc2dFdnQgKSB7XG4gICAgICB2YXIgZGVmZXJyZWQgPSBEZWZlcnJlZCgpO1xuICAgICAgdmFyIHNvdXJjZSA9IGV2dC5zb3VyY2U7XG5cbiAgICAgIC8vY29uc29sZS5sb2coIG1zZ0V2dCwgZXZ0ICk7XG4gICAgICAvL2NvbnNvbGUubG9nKCBldnQgKTtcblxuICAgICAgdmFyIG1zZ1Byb2Nlc3NvciA9IHRoaXMubXNnUHJvY2Vzc29yc1sgbXNnRXZ0LnR5cGUgXTtcblxuICAgICAgaWYgKCBtc2dFdnQuZGlyZWN0aW9uID09ICdzZW5kJyApIG1zZ1Byb2Nlc3Nvci5vblJlY3YoIG1zZ0V2dCwgc291cmNlLCBvcmlnaW4sIGRlZmVycmVkICk7IGVsc2UgbXNnUHJvY2Vzc29yLm9uU2VuZFJlc3AoIG1zZ0V2dCwgb3JpZ2luLCBkZWZlcnJlZCApO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogQHByaXZhdGUgXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsXG4gICAqIEB0eXBlIFN0cmluZ1xuICAgKi9cbiAgZ2V0RnJhbWVFdmVudElkXzpmdW5jdGlvbiggZWwgKXtcbiAgICB2YXIgZnJhbWVFdmVudElkID0gXCJ3aW5kb3dcIjtcblxuICAgIGlmICggdXRpbC5pc0VsZW1lbnQoIGVsICkgKSB7XG4gICAgICBmcmFtZUV2ZW50SWQgPSAoZnVuY3Rpb24oIGlkICl7XG4gICAgICAgIHZhciBmcmFtZUV2ZW50SWQgPSBpZCA/IGlkIDogZ3VpZCgpO1xuICAgICAgICB1dGlsLmRhdGEoIGVsLCAnZnJhbWVFdmVudElkJywgZnJhbWVFdmVudElkICk7XG4gICAgICAgIHJldHVybiBmcmFtZUV2ZW50SWQ7XG4gICAgICB9KSh1dGlsLmRhdGEoIGVsLCAnZnJhbWVFdmVudElkJyApKTtcbiAgICB9XG4gICAgcmV0dXJuIGZyYW1lRXZlbnRJZDtcbiAgfSxcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtTdHJpbmd9IGZyYW1lRXZlbnRJZFxuICAgKiBAdHlwZSBBcnJheVtFdmVudE9ic2VydmVyXVxuICAgKi9cbiAgZ2V0RnJhbWVPYnNlcnZlckxpc3RfOmZ1bmN0aW9uKCBmcmFtZUV2ZW50SWQgKXtcblxuICAgIHJldHVybiAhdGhpcy5ldmVudE9ic2VydmVyc1tmcmFtZUV2ZW50SWRdID8gdGhpcy5ldmVudE9ic2VydmVyc1tmcmFtZUV2ZW50SWRdID0gW106dGhpcy5ldmVudE9ic2VydmVyc1tmcmFtZUV2ZW50SWRdO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbFxuICAgKiBAdHlwZSBFdmVudE9ic2VydmVyXG4gICAqL1xuICBnZXRPYnNlcnZlcl86ZnVuY3Rpb24oIGVsICl7XG5cbiAgICB2YXIgZnJhbWVFdmVudElkID0gdGhpcy5nZXRGcmFtZUV2ZW50SWRfKCBlbCApO1xuICAgIHZhciBmcmFtZU9ic2VydmVyTGlzdCA9IHRoaXMuZ2V0RnJhbWVPYnNlcnZlckxpc3RfKCBmcmFtZUV2ZW50SWQgKTtcbiAgICB2YXIgb2JzZXJ2ZXI7XG5cbiAgICBmb3IgKCB2YXIgaSBpbiBmcmFtZU9ic2VydmVyTGlzdCApIHtcblxuICAgICAgaWYgKCBmcmFtZU9ic2VydmVyTGlzdFtpXS5lbCA9PT0gZWwgKSB7XG4gICAgICAgIG9ic2VydmVyID0gZnJhbWVPYnNlcnZlckxpc3RbaV0ub2JzZXJ2ZXI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICggIW9ic2VydmVyICkge1xuXG4gICAgICBvYnNlcnZlciA9IG5ldyBFdmVudE9ic2VydmVyKCk7XG5cbiAgICAgIGZyYW1lT2JzZXJ2ZXJMaXN0LnB1c2goe1xuICAgICAgICBlbDplbCxcbiAgICAgICAgb2JzZXJ2ZXI6b2JzZXJ2ZXJcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBvYnNlcnZlcjtcbiAgfSxcblxuICAvKipcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZVxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBmdW5jXG4gICAqL1xuICBvbjpmdW5jdGlvbiggZWwsIGV2ZW50TmFtZSwgZnVuYyApe1xuXG4gICAgdmFyIG9ic2VydmVyID0gdGhpcy5nZXRPYnNlcnZlcl8oIGVsICk7XG4gICAgdmFyIGZyYW1lRXZlbnRJZCA9IHRoaXMuZ2V0RnJhbWVFdmVudElkXyggZWwgKTtcblxuICAgIG9ic2VydmVyLm9uKCBldmVudE5hbWUsIGZ1bmMgKTtcblxuICAgIGlmICggb2JzZXJ2ZXIuZ2V0RXZlbnROdW1iZXIoIGV2ZW50TmFtZSApID09PSAxICkgdGhpcy5yZWdpc3RlckV2ZW50KCBlbCwge2V2ZW50TmFtZTpldmVudE5hbWUsIGZyYW1lRXZlbnRJZDpmcmFtZUV2ZW50SWR9ICk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWVcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gZnVuY1xuICAgKi9cbiAgb2ZmOmZ1bmN0aW9uKCBlbCwgZXZlbnROYW1lLCBmdW5jICl7XG5cbiAgICB2YXIgb2JzZXJ2ZXIgPSB0aGlzLmdldE9ic2VydmVyXyggZWwgKTtcbiAgICB2YXIgZnJhbWVFdmVudElkID0gdGhpcy5nZXRGcmFtZUV2ZW50SWRfKCBlbCApO1xuXG4gICAgb2JzZXJ2ZXIub2ZmKCBldmVudE5hbWUsIGZ1bmMgKTtcblxuICAgIGlmICggb2JzZXJ2ZXIuZ2V0RXZlbnROdW1iZXIoIGV2ZW50TmFtZSApID09PSAwICkgdGhpcy51bnJlZ2lzdGVyRXZlbnQoIGVsLCB7ZXZlbnROYW1lOmV2ZW50TmFtZSwgZnJhbWVFdmVudElkOmZyYW1lRXZlbnRJZH0gKTtcbiAgfSxcblxuICAvKipcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAgICovXG4gIHRyaWdnZXI6ZnVuY3Rpb24oIG5hbWUgKXtcbiBcbiAgICB0aGlzLnJlZ2lzdGVyRXZlbnRPYnNlcnZlci50cmlnZ2VyKCBuYW1lLCB1dGlsLmNvcHlBcnJheSggYXJndW1lbnRzICkuc2xpY2UoMSkgKTtcbiAgfSxcblxuICAvKipcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxcbiAgICogQHR5cGUgRGVmZXJyZWRcbiAgICovXG4gIGNhbGxNZXRob2Q6YnVpbGRGcmFtZUNhbGxlciggJ21ldGhvZCcgKSxcblxuICAvKipcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxcbiAgICogQHR5cGUgRGVmZXJyZWRcbiAgICovXG4gIHJlZ2lzdGVyRXZlbnQ6YnVpbGRGcmFtZUNhbGxlciggJ3JlZ2lzdGVyRXZlbnQnICksXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsXG4gICAqIEB0eXBlIERlZmVycmVkXG4gICAqL1xuICB1bnJlZ2lzdGVyRXZlbnQ6YnVpbGRGcmFtZUNhbGxlciggJ3VucmVnaXN0ZXJFdmVudCcgKSxcblxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge09iamVjdH0gbWV0aG9kc1xuICAgKi9cbiAgcmVnaXN0ZXJNZXRob2RzOmZ1bmN0aW9uKCBtZXRob2RzICl7XG5cbiAgICBmb3IgKHZhciBpIGluIG1ldGhvZHMpIHtcbiAgICAgIHRoaXMubWV0aG9kc19baV0gPSBtZXRob2RzW2ldO1xuICAgIH07XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzdGF0ZU5hbWVcbiAgICovXG4gIHJlc29sdmVTdGF0ZTpmdW5jdGlvbiggc3RhdGVOYW1lICl7XG5cbiAgICB0aGlzLnN0YXRlTWFuYWdlci5nZXQoIHN0YXRlTmFtZSApLnJlc29sdmUoIHV0aWwuY29weUFycmF5KCBhcmd1bWVudHMgKS5zbGljZSgxKSApO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gc3RhdGVOYW1lXG4gICAqL1xuICByZWplY3RTdGF0ZTpmdW5jdGlvbiggc3RhdGVOYW1lICl7XG5cbiAgICB0aGlzLnN0YXRlTWFuYWdlci5nZXQoIHN0YXRlTmFtZSApLnJlamVjdCggdXRpbC5jb3B5QXJyYXkoIGFyZ3VtZW50cyApLnNsaWNlKDEpICk7XG4gIH0sXG5cblxuICAvKipcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxcbiAgICogQHBhcmFtIHtTdHJpbmd9IHN0YXRlTmFtZVxuICAgKiBAdHlwZSBEZWZlcnJlZFxuICAgKi9cbiAgcmVhZHlTdGF0ZTpidWlsZEZyYW1lQ2FsbGVyKCAnc3RhdGUnICksXG59O1xuXG5cbnZhciBmcmFtZU9ic2VydmVyID0gbmV3IEZyYW1lT2JzZXJ2ZXIoKTtcblxuLy9pZiAoIHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgKSB3aW5kb3cuZnJhbWVPYnNlcnZlciA9IGZyYW1lT2JzZXJ2ZXI7XG4vL2lmICggdHlwZW9mIG1vZHVsZSAhPT0gXCJ1bmRlZmluZWRcIiApIG1vZHVsZS5leHBvcnRzID0gZnJhbWVPYnNlcnZlcjtcblxuZXhwb3J0IGRlZmF1bHQgZnJhbWVPYnNlcnZlcjtcblxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9qcy9mcmFtZU9ic2VydmVyLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFDQTtBQUNBO0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTtBQUFBO0FBQ0E7Ozs7O0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7QUFLQTtBQWhMQTtBQUNBO0FBbUxBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),
/* 9 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _util = __webpack_require__(0);\n\nvar _util2 = _interopRequireDefault(_util);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * @class\n */\nvar EventMsgProcessor = function EventMsgProcessor(frameObserver) {\n\n  this.frameObserver = frameObserver;\n};\n\nEventMsgProcessor.prototype = {\n  /**\n   * @param {Event} msgEvt\n   * @param {Object} source\n   * @param {String} origin\n   * @param {Deferred} deferred\n   */\n  onRecv: function onRecv(msgEvt, source, origin, deferred) {\n    var params = msgEvt.data.result;\n    var type = params[0].type;\n    var param = _util2.default.copyArray(params[1]);\n    //console.log( arguments );\n    param.unshift(type);\n    var observerList = this.frameObserver.getFrameObserverList_(msgEvt.frameEventId);\n\n    if (observerList) {\n\n      for (var i in observerList) {\n        var observerContext = observerList[i];\n\n        if (_util2.default.getContentWindowByEl(observerContext.el) === source) {\n          observerContext.observer.trigger.apply(observerContext.observer, param);\n        }\n      }\n    }\n  }\n};\n\nexports.default = EventMsgProcessor;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvcHJvY2Vzc29yL0V2ZW50TXNnUHJvY2Vzc29yLmpzP2Y1YmYiXSwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQgdXRpbCBmcm9tICcuLi91dGlsJztcblxuLyoqXG4gKiBAY2xhc3NcbiAqL1xudmFyIEV2ZW50TXNnUHJvY2Vzc29yID0gZnVuY3Rpb24oIGZyYW1lT2JzZXJ2ZXIgKXtcblxuICB0aGlzLmZyYW1lT2JzZXJ2ZXIgPSBmcmFtZU9ic2VydmVyO1xufTtcblxuRXZlbnRNc2dQcm9jZXNzb3IucHJvdG90eXBlID0ge1xuICAvKipcbiAgICogQHBhcmFtIHtFdmVudH0gbXNnRXZ0XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2VcbiAgICogQHBhcmFtIHtTdHJpbmd9IG9yaWdpblxuICAgKiBAcGFyYW0ge0RlZmVycmVkfSBkZWZlcnJlZFxuICAgKi9cbiAgb25SZWN2OmZ1bmN0aW9uKCBtc2dFdnQsIHNvdXJjZSwgb3JpZ2luLCBkZWZlcnJlZCApe1xuICAgIHZhciBwYXJhbXMgPSBtc2dFdnQuZGF0YS5yZXN1bHQ7XG4gICAgdmFyIHR5cGUgPSBwYXJhbXNbMF0udHlwZTtcbiAgICB2YXIgcGFyYW0gPSB1dGlsLmNvcHlBcnJheSggcGFyYW1zWzFdICk7XG4gICAgLy9jb25zb2xlLmxvZyggYXJndW1lbnRzICk7XG4gICAgcGFyYW0udW5zaGlmdCggdHlwZSApO1xuICAgIHZhciBvYnNlcnZlckxpc3QgPSB0aGlzLmZyYW1lT2JzZXJ2ZXIuZ2V0RnJhbWVPYnNlcnZlckxpc3RfKCBtc2dFdnQuZnJhbWVFdmVudElkICk7XG5cbiAgICBpZiAoIG9ic2VydmVyTGlzdCApIHtcblxuICAgICAgZm9yICggdmFyIGkgaW4gb2JzZXJ2ZXJMaXN0ICkge1xuICAgICAgICB2YXIgb2JzZXJ2ZXJDb250ZXh0ID0gb2JzZXJ2ZXJMaXN0W2ldO1xuXG4gICAgICAgIGlmICggdXRpbC5nZXRDb250ZW50V2luZG93QnlFbCggb2JzZXJ2ZXJDb250ZXh0LmVsICkgPT09IHNvdXJjZSApIHtcbiAgICAgICAgICBvYnNlcnZlckNvbnRleHQub2JzZXJ2ZXIudHJpZ2dlci5hcHBseSggb2JzZXJ2ZXJDb250ZXh0Lm9ic2VydmVyLCBwYXJhbSApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBFdmVudE1zZ1Byb2Nlc3NvcjtcblxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9qcy9wcm9jZXNzb3IvRXZlbnRNc2dQcm9jZXNzb3IuanMiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUNBO0FBQ0E7Ozs7O0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXpCQTtBQUNBO0FBMkJBIiwic291cmNlUm9vdCI6IiJ9");

/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _builder = __webpack_require__(1);\n\n/**\n * @class\n */\nvar MethodMsgProcessor = function MethodMsgProcessor(frameObserver) {\n  this.frameObserver = frameObserver;\n};\n\nMethodMsgProcessor.prototype = {\n\n  /**\n   * @param {Event} msgEvt\n   * @param {Object} source\n   * @param {String} origin\n   * @param {Deferred} deferred\n   */\n  onRecv: function onRecv(msgEvt, source, origin, deferred) {\n    var frameObserver = this.frameObserver;\n    var params = msgEvt.data.params;\n    var methodName = params.shift();\n\n    params.unshift(deferred);\n\n    if (frameObserver.methods_ && frameObserver.methods_[methodName]) {\n      frameObserver.methods_[methodName].apply(frameObserver.methods_, params);\n    } else {\n      deferred.reject({ err: \"the method is not exist.\" });\n    }\n\n    _builder.processorBuilder.deferredRecv().apply(this, arguments);\n  },\n\n  /**\n   * @param {Event} msgEvt\n   */\n  onSendResp: _builder.processorBuilder.deferredSendResp()\n};\n\nexports.default = MethodMsgProcessor;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2pzL3Byb2Nlc3Nvci9NZXRob2RNc2dQcm9jZXNzb3IuanM/MTE2YyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCB7cHJvY2Vzc29yQnVpbGRlcn0gZnJvbSAnLi4vYnVpbGRlcic7IFxuXG4vKipcbiAqIEBjbGFzc1xuICovXG52YXIgTWV0aG9kTXNnUHJvY2Vzc29yID0gZnVuY3Rpb24oIGZyYW1lT2JzZXJ2ZXIgKXtcbiAgdGhpcy5mcmFtZU9ic2VydmVyID0gZnJhbWVPYnNlcnZlcjtcbn07XG5cbk1ldGhvZE1zZ1Byb2Nlc3Nvci5wcm90b3R5cGUgPSB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7RXZlbnR9IG1zZ0V2dFxuICAgKiBAcGFyYW0ge09iamVjdH0gc291cmNlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBvcmlnaW5cbiAgICogQHBhcmFtIHtEZWZlcnJlZH0gZGVmZXJyZWRcbiAgICovXG4gIG9uUmVjdjpmdW5jdGlvbiggbXNnRXZ0LCBzb3VyY2UsIG9yaWdpbiwgZGVmZXJyZWQgKXtcbiAgICB2YXIgZnJhbWVPYnNlcnZlciA9IHRoaXMuZnJhbWVPYnNlcnZlcjtcbiAgICB2YXIgcGFyYW1zID0gbXNnRXZ0LmRhdGEucGFyYW1zO1xuICAgIHZhciBtZXRob2ROYW1lID0gcGFyYW1zLnNoaWZ0KClcblxuICAgIHBhcmFtcy51bnNoaWZ0KCBkZWZlcnJlZCApO1xuXG4gICAgaWYgKCBmcmFtZU9ic2VydmVyLm1ldGhvZHNfICYmIGZyYW1lT2JzZXJ2ZXIubWV0aG9kc19bbWV0aG9kTmFtZV0gKSB7XG4gICAgICBmcmFtZU9ic2VydmVyLm1ldGhvZHNfW21ldGhvZE5hbWVdLmFwcGx5KCBmcmFtZU9ic2VydmVyLm1ldGhvZHNfLCBwYXJhbXMgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGVmZXJyZWQucmVqZWN0KHtlcnI6XCJ0aGUgbWV0aG9kIGlzIG5vdCBleGlzdC5cIn0pO1xuICAgIH1cblxuICAgIHByb2Nlc3NvckJ1aWxkZXIuZGVmZXJyZWRSZWN2KCkuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuICB9LFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0V2ZW50fSBtc2dFdnRcbiAgICovXG4gIG9uU2VuZFJlc3A6cHJvY2Vzc29yQnVpbGRlci5kZWZlcnJlZFNlbmRSZXNwKClcbn07XG5cblxuZXhwb3J0IGRlZmF1bHQgTWV0aG9kTXNnUHJvY2Vzc29yO1xuXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2pzL3Byb2Nlc3Nvci9NZXRob2RNc2dQcm9jZXNzb3IuanMiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBNUJBO0FBQ0E7QUErQkEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),
/* 11 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _util = __webpack_require__(0);\n\nvar _util2 = _interopRequireDefault(_util);\n\nvar _builder = __webpack_require__(1);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * @class\n */\nvar RegisterMsgProcessor = function RegisterMsgProcessor(frameObserver) {\n\n  this.frameObserver = frameObserver;\n};\n\nRegisterMsgProcessor.prototype = {\n\n  /**\n   * @param {Event} msgEvt\n   * @param {Object} source\n   * @param {String} origin\n   * @param {Deferred} deferred\n   */\n  onRecv: function onRecv(msgEvt, source, origin, deferred) {\n    var param = msgEvt.data.params[0];\n    var frameObserver = this.frameObserver;\n    var eventName = param.eventName;\n    var frameEventId = param.frameEventId;\n\n    //console.log( arguments , param);\n    frameObserver.registerEventObserver.on(eventName, function () {\n      //console.log( arguments );\n      var respMsgEvt = (0, _builder.buildMessageEvent)('event', 'send', { result: _util2.default.copyArray(arguments) }, msgEvt.id);\n      respMsgEvt.frameEventId = frameEventId;\n      _util2.default.postMessage(source, respMsgEvt, origin);\n    }, { target: source });\n  },\n\n  /**\n   * @param {Event} msgEvt\n   */\n  onSendResp: function onSendResp(msgEvt) {}\n};\n\nexports.default = RegisterMsgProcessor;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2pzL3Byb2Nlc3Nvci9SZWdpc3Rlck1zZ1Byb2Nlc3Nvci5qcz80MzAyIl0sInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IHV0aWwgZnJvbSAnLi4vdXRpbCc7XG5pbXBvcnQge2J1aWxkTWVzc2FnZUV2ZW50fSBmcm9tICcuLi9idWlsZGVyJzsgXG5cbi8qKlxuICogQGNsYXNzXG4gKi9cbnZhciBSZWdpc3Rlck1zZ1Byb2Nlc3NvciA9IGZ1bmN0aW9uKCBmcmFtZU9ic2VydmVyICl7XG5cbiAgdGhpcy5mcmFtZU9ic2VydmVyID0gZnJhbWVPYnNlcnZlcjtcbn07XG5cblJlZ2lzdGVyTXNnUHJvY2Vzc29yLnByb3RvdHlwZSA9IHtcblxuICAvKipcbiAgICogQHBhcmFtIHtFdmVudH0gbXNnRXZ0XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2VcbiAgICogQHBhcmFtIHtTdHJpbmd9IG9yaWdpblxuICAgKiBAcGFyYW0ge0RlZmVycmVkfSBkZWZlcnJlZFxuICAgKi9cbiAgb25SZWN2OmZ1bmN0aW9uKCBtc2dFdnQsIHNvdXJjZSwgb3JpZ2luLCBkZWZlcnJlZCApe1xuICAgIHZhciBwYXJhbSA9IG1zZ0V2dC5kYXRhLnBhcmFtc1swXTtcbiAgICB2YXIgZnJhbWVPYnNlcnZlciA9IHRoaXMuZnJhbWVPYnNlcnZlcjtcbiAgICB2YXIgZXZlbnROYW1lID0gcGFyYW0uZXZlbnROYW1lO1xuICAgIHZhciBmcmFtZUV2ZW50SWQgPSBwYXJhbS5mcmFtZUV2ZW50SWQ7XG5cbiAgICAvL2NvbnNvbGUubG9nKCBhcmd1bWVudHMgLCBwYXJhbSk7XG4gICAgZnJhbWVPYnNlcnZlci5yZWdpc3RlckV2ZW50T2JzZXJ2ZXIub24oIGV2ZW50TmFtZSwgZnVuY3Rpb24oKXtcbiAgICAgIC8vY29uc29sZS5sb2coIGFyZ3VtZW50cyApO1xuICAgICAgdmFyIHJlc3BNc2dFdnQgPSBidWlsZE1lc3NhZ2VFdmVudCggJ2V2ZW50JywgJ3NlbmQnLCB7cmVzdWx0OnV0aWwuY29weUFycmF5KCBhcmd1bWVudHMgKSB9LCBtc2dFdnQuaWQgKTtcbiAgICAgIHJlc3BNc2dFdnQuZnJhbWVFdmVudElkID0gZnJhbWVFdmVudElkO1xuICAgICAgdXRpbC5wb3N0TWVzc2FnZSggc291cmNlLCByZXNwTXNnRXZ0LCBvcmlnaW4gKTtcbiAgICB9LCB7dGFyZ2V0OnNvdXJjZX0gKTtcbiAgfSxcblxuICAvKipcbiAgICogQHBhcmFtIHtFdmVudH0gbXNnRXZ0XG4gICAqL1xuICBvblNlbmRSZXNwOmZ1bmN0aW9uKCBtc2dFdnQgKXtcblxuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBSZWdpc3Rlck1zZ1Byb2Nlc3NvcjtcblxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9qcy9wcm9jZXNzb3IvUmVnaXN0ZXJNc2dQcm9jZXNzb3IuanMiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUExQkE7QUFDQTtBQThCQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),
/* 12 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _builder = __webpack_require__(1);\n\n/**\n * @class\n */\nvar StateProcessor = function StateProcessor(frameObserver) {\n\n  this.frameObserver = frameObserver;\n};\n\nStateProcessor.prototype = {\n\n  /**\n   * @param {Event} msgEvt\n   * @param {Object} source\n   * @param {String} origin\n   * @param {Deferred} deferred\n   */\n  onRecv: function onRecv(msgEvt, source, origin, deferred) {\n    var frameObserver = this.frameObserver;\n    var data = msgEvt.data;\n    var params = data.params;\n\n    frameObserver.stateManager.assign(params[0], deferred);\n    _builder.processorBuilder.deferredRecv().apply(this, arguments);\n  },\n\n  /**\n   * @param {Event} msgEvt\n   */\n  onSendResp: _builder.processorBuilder.deferredSendResp()\n};\n\nexports.default = StateProcessor;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2pzL3Byb2Nlc3Nvci9TdGF0ZVByb2Nlc3Nvci5qcz8zZmM1Il0sInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IHtwcm9jZXNzb3JCdWlsZGVyfSBmcm9tICcuLi9idWlsZGVyJztcblxuLyoqXG4gKiBAY2xhc3NcbiAqL1xudmFyIFN0YXRlUHJvY2Vzc29yID0gZnVuY3Rpb24oIGZyYW1lT2JzZXJ2ZXIgKXtcblxuICB0aGlzLmZyYW1lT2JzZXJ2ZXIgPSBmcmFtZU9ic2VydmVyO1xufTtcblxuU3RhdGVQcm9jZXNzb3IucHJvdG90eXBlID0ge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0V2ZW50fSBtc2dFdnRcbiAgICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gb3JpZ2luXG4gICAqIEBwYXJhbSB7RGVmZXJyZWR9IGRlZmVycmVkXG4gICAqL1xuICBvblJlY3Y6ZnVuY3Rpb24oIG1zZ0V2dCwgc291cmNlLCBvcmlnaW4sIGRlZmVycmVkICl7XG4gICAgdmFyIGZyYW1lT2JzZXJ2ZXIgPSB0aGlzLmZyYW1lT2JzZXJ2ZXI7XG4gICAgdmFyIGRhdGEgPSBtc2dFdnQuZGF0YTtcbiAgICB2YXIgcGFyYW1zID0gZGF0YS5wYXJhbXM7XG5cbiAgICBmcmFtZU9ic2VydmVyLnN0YXRlTWFuYWdlci5hc3NpZ24oIHBhcmFtc1swXSwgZGVmZXJyZWQgKTtcbiAgICBwcm9jZXNzb3JCdWlsZGVyLmRlZmVycmVkUmVjdigpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7RXZlbnR9IG1zZ0V2dFxuICAgKi9cbiAgb25TZW5kUmVzcDpwcm9jZXNzb3JCdWlsZGVyLmRlZmVycmVkU2VuZFJlc3AoKVxufTtcblxuZXhwb3J0IGRlZmF1bHQgU3RhdGVQcm9jZXNzb3I7XG5cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvanMvcHJvY2Vzc29yL1N0YXRlUHJvY2Vzc29yLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQXBCQTtBQUNBO0FBc0JBIiwic291cmNlUm9vdCI6IiJ9");

/***/ }),
/* 13 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n/**\n * @class\n */\nvar UnregisterMsgProcessor = function UnregisterMsgProcessor(frameObserver) {\n\n  this.frameObserver = frameObserver;\n};\n\nUnregisterMsgProcessor.prototype = {\n\n  /**\n   * @param {Event} msgEvt\n   * @param {Object} source\n   * @param {String} origin\n   * @param {Deferred} deferred\n   */\n  onRecv: function onRecv(msgEvt, source, origin, deferred) {\n    var param = msgEvt.data.params[0];\n    var frameObserver = this.frameObserver;\n    var eventName = param.eventName;\n    var frameEventId = param.frameEventId;\n\n    frameObserver.registerEventObserver.off(eventName, undefined, source);\n  },\n\n  /**\n   * @param {Event} msgEvt\n   */\n  onSendResp: function onSendResp(msgEvt) {}\n\n};\n\nexports.default = UnregisterMsgProcessor;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2pzL3Byb2Nlc3Nvci9VbnJlZ2lzdGVyTXNnUHJvY2Vzc29yLmpzPzg3ZTEiXSwic291cmNlc0NvbnRlbnQiOlsiXG4vKipcbiAqIEBjbGFzc1xuICovXG52YXIgVW5yZWdpc3Rlck1zZ1Byb2Nlc3NvciA9IGZ1bmN0aW9uKCBmcmFtZU9ic2VydmVyICl7XG5cbiAgdGhpcy5mcmFtZU9ic2VydmVyID0gZnJhbWVPYnNlcnZlcjtcbn07XG5cblVucmVnaXN0ZXJNc2dQcm9jZXNzb3IucHJvdG90eXBlID0ge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0V2ZW50fSBtc2dFdnRcbiAgICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gb3JpZ2luXG4gICAqIEBwYXJhbSB7RGVmZXJyZWR9IGRlZmVycmVkXG4gICAqL1xuICBvblJlY3Y6ZnVuY3Rpb24oIG1zZ0V2dCwgc291cmNlLCBvcmlnaW4sIGRlZmVycmVkICl7XG4gICAgdmFyIHBhcmFtID0gbXNnRXZ0LmRhdGEucGFyYW1zWzBdO1xuICAgIHZhciBmcmFtZU9ic2VydmVyID0gdGhpcy5mcmFtZU9ic2VydmVyO1xuICAgIHZhciBldmVudE5hbWUgPSBwYXJhbS5ldmVudE5hbWU7XG4gICAgdmFyIGZyYW1lRXZlbnRJZCA9IHBhcmFtLmZyYW1lRXZlbnRJZDtcblxuICAgIGZyYW1lT2JzZXJ2ZXIucmVnaXN0ZXJFdmVudE9ic2VydmVyLm9mZiggZXZlbnROYW1lLCB1bmRlZmluZWQsIHNvdXJjZSApO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0V2ZW50fSBtc2dFdnRcbiAgICovXG4gIG9uU2VuZFJlc3A6ZnVuY3Rpb24oIG1zZ0V2dCApe1xuXG4gIH1cblxufTtcblxuZXhwb3J0IGRlZmF1bHQgVW5yZWdpc3Rlck1zZ1Byb2Nlc3NvcjtcblxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9qcy9wcm9jZXNzb3IvVW5yZWdpc3Rlck1zZ1Byb2Nlc3Nvci5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBckJBO0FBQ0E7QUF5QkEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),
/* 14 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _util = __webpack_require__(0);\n\nvar _util2 = _interopRequireDefault(_util);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * @namespace\n *\n */\nvar urlUtils = {\n\n  /***\n   * @param {String} url\n   * @type String\n   */\n  getOrigin: function getOrigin(url) {\n    var result = /https?:\\/\\/[^/]*\\/?/.exec(url);\n    return result.length ? result[0] : null;\n  },\n\n  /** \n   * @param {HTMLElement} el\n   * @type Object\n   */\n  getOriginByFrameEl: function getOriginByFrameEl(el) {\n\n    return _util2.default.isElement(el) ? urlUtils.getOrigin(el.src) : document.referrer;\n  }\n};\n\nexports.default = urlUtils;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2pzL3VybFV0aWxzLmpzPzc3MzUiXSwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQgdXRpbCBmcm9tICcuL3V0aWwnO1xuXG4vKipcbiAqIEBuYW1lc3BhY2VcbiAqXG4gKi9cbnZhciB1cmxVdGlscyA9IHtcblxuICAvKioqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB1cmxcbiAgICogQHR5cGUgU3RyaW5nXG4gICAqL1xuICBnZXRPcmlnaW46ZnVuY3Rpb24oIHVybCApe1xuICAgIHZhciByZXN1bHQgPSAvaHR0cHM/OlxcL1xcL1teL10qXFwvPy8uZXhlYyggdXJsICk7XG4gICAgcmV0dXJuIHJlc3VsdC5sZW5ndGggPyByZXN1bHRbMF0gOiBudWxsO1xuICB9LFxuXG4gIC8qKiBcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxcbiAgICogQHR5cGUgT2JqZWN0XG4gICAqL1xuICBnZXRPcmlnaW5CeUZyYW1lRWw6ZnVuY3Rpb24oIGVsICl7XG5cbiAgICByZXR1cm4gdXRpbC5pc0VsZW1lbnQoIGVsICkgPyB1cmxVdGlscy5nZXRPcmlnaW4oIGVsLnNyYyApIDogZG9jdW1lbnQucmVmZXJyZXI7XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IHVybFV0aWxzO1xuXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2pzL3VybFV0aWxzLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFDQTtBQUNBOzs7OztBQUNBOzs7O0FBSUE7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFsQkE7QUFDQTtBQW9CQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),
/* 15 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(5);


/***/ })
/******/ ]);
});