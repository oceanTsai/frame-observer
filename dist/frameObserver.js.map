{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 89bd60b21f302d5aa2a1","webpack:///./src/js/util.js","webpack:///./src/js/builder.js","webpack:///./src/js/buildDeferred.js","webpack:///./src/js/guid.js","webpack:///./src/js/config.js","webpack:///./src/js/frameObserver.js","webpack:///./src/js/index.js","webpack:///./src/js/EventObserver.js","webpack:///./src/js/FrameObserverContext.js","webpack:///./src/js/StateManager.js","webpack:///./src/js/processor/EventMsgProcessor.js","webpack:///./src/js/processor/MethodMsgProcessor.js","webpack:///./src/js/processor/RegisterMsgProcessor.js","webpack:///./src/js/processor/StateProcessor.js","webpack:///./src/js/processor/UnregisterMsgProcessor.js","webpack:///./src/js/urlUtils.js"],"names":["util","isString","str","isElement","el","Element","isObject","obj","isArray","Object","prototype","toString","call","clone","deep","cloneObj","copyObj","target","params","copyArray","arguments","copyObjs","slice","index","i","array","newArray","length","createElement","tagName","document","DATA_KEY","data","key","val","getContentWindowByEl","contentWindow","postMessage","win","origin","JSON","stringify","buildMessageEvent","type","direction","id","extraAttrs","infoData","_id","_extraAttrs","defaults","timestamp","Date","buildFrameCaller","eventType","deferred","msgEvt","evtMapping","getOriginByFrameEl","processorBuilder","deferredSendResp","callMethodName","frameObserver","respTmp","deferredState","deferredRecv","source","buildPostingOrigin","respMsgEvt","result","done","fail","buildDeferred","reject","resolve","promise","Promise","res","rej","toArray","Array","always","then","apply","guid","s4","Math","floor","random","substring","FRAME_OBSERVER","FrameObserver","eventObservers","registerEventObserver","stateManager","methods_","msgProcessors","method","registerEvent","unregisterEvent","event","state","window","addEventListener","onMessage","bind","evt","parse","e","msgProcessor","onRecv","onSendResp","getFrameEventId_","frameEventId","getFrameObserverList_","getObserver_","frameObserverList","observer","push","on","eventName","func","getEventNumber","off","trigger","name","callMethod","registerMethods","methods","resolveState","stateName","get","rejectState","readyState","getContext","module","exports","EventObserver","events","opts","once","eventList","undefined","splice","timeStamp","originParams","filterList","unshift","FrameObserverContext","scope","args","HTMLElement","StateManager","stateDeferredMap","assign","stateDeferred","EventMsgProcessor","param","observerList","observerContext","MethodMsgProcessor","methodName","shift","err","RegisterMsgProcessor","StateProcessor","UnregisterMsgProcessor","urlUtils","getOrigin","url","exec","src","referrer"],"mappings":"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","file":"frameObserver.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"frameObserver\"] = factory();\n\telse\n\t\troot[\"frameObserver\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 16);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 89bd60b21f302d5aa2a1","\nimport guid from './guid';\n\n/***\n * @namespace\n */\nvar util = {\n\n  /**\n   * @param {String} str\n   * @type boolean\n   */\n  isString:function( str ){\n\n    return typeof str === \"string\";\n  },\n\n  /**\n   * @param {HTMLElement} el\n   * @type boolean\n   */\n  isElement:function( el ){\n\n    return el instanceof Element;\n  },\n\n  /**\n   * @param {Object} obj\n   * @type boolean\n   */\n  isObject:function( obj ){ return typeof obj == \"object\"; },\n\n  /**\n   * @param {Object} obj\n   * @type boolean\n   */\n  isArray:function( obj ){ return typeof Object.prototype.toString.call(obj) == \"[object Array]\"; },\n\n  /**\n   * @param {Object} target\n   * @param {Object} obj\n   * @type Object\n   */\n  clone:function( deep, cloneObj, copyObj ){\n\n    var target, obj, params = this.copyArray( arguments ), copyObjs;\n\n    if ( typeof deep != \"boolean\" ) {\n      target = deep,\n      copyObjs = params.slice(1);\n    } else {\n      target = cloneObj;\n      copyObjs = params.slice(2);\n    }\n\n    for ( var index in copyObjs ) {\n\n      var obj = copyObjs[index];\n\n      for ( var i in obj ) {\n\n        if ( util.isArray( obj[i] ) ) {\n\n          target[i] = util.isArray( target[i] ) ? target[i]: [];\n\n        } else if ( util.isObject( obj[i] ) ) {\n\n          target[i] = util.isObject( target[i] ) ? target[i]: {};\n\n        }\n\n        if ( deep && util.isObject( obj[i] ) ) clone( target[i], obj[i] );\n\n        else target[i] = obj[i];\n      }\n    }\n\n    return target;\n  },\n\n  /***\n   * @param {Array} array\n   * @type Array\n   */\n  copyArray:function( array ){\n\n    var newArray = [];\n\n    for ( var i = 0; i<array.length; i++ ) newArray[i] = array[i];\n    return newArray;\n  },\n\n  /**\n   * @param {String} tagName\n   */\n  createElement:function( tagName ){\n    return document.createElement( tagName );\n  },\n\n  DATA_KEY:guid(),\n\n  /**\n   * @param {HTMLElement} el\n   * @param {String} key\n   * @param {*} val\n   */\n  data:function( el, key, val ){\n    var DATA_KEY = this.DATA_KEY;\n    var data = el[DATA_KEY]? el[DATA_KEY] : el[DATA_KEY] = {};\n\n    if ( arguments.length === 3 ) {\n      data[key] = val;\n    } else {\n      return data[key];\n    }\n  },\n\n  /** \n   * @param {HTMLElement} el\n   * @type Object\n   */\n  getContentWindowByEl:function( el ){\n  \n    return util.isElement( el ) ? el.contentWindow: el; \n  },\n\n  /**\n   * @param {Window} win\n   * @param {Object} data\n   * @param {String} origin\n   */\n  postMessage:function( win, data, origin ){\n    win.postMessage( JSON.stringify( data ), origin );\n  }\n};\n\nexport default util;\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/util.js","\nimport util from './util';\nimport guid from './guid';\nimport urlUtils from './urlUtils';\nimport Deferred from './buildDeferred';\nimport {FRAME_OBSERVER} from './config'; \n\n/**\n * @param {String} type\n * @param {Object} data\n * @param {String} id\n * @param {Object} extraAttrs\n */\nvar buildMessageEvent = function( type, direction, data, id, extraAttrs ){\n  var infoData = data || {};\n  var _id = id ? id: guid();\n  var _extraAttrs = extraAttrs || {};\n  var defaults = {};\n  defaults[FRAME_OBSERVER] = true;\n  return util.clone( {type:type, data:infoData, id:_id, timestamp:+new Date(), direction:direction}, _extraAttrs, defaults );\n};\n\n/**\n * @param {String} eventType\n * @param {Object} extraAttrs\n */\nvar buildFrameCaller = function( eventType, extraAttrs ){\n\n  /**\n   * @param {HTMLElement} el\n   * @type Deferred\n   */\n  return function( el ){\n\n    var deferred = Deferred();\n    var origin;\n    var contentWindow;\n    var msgEvt = buildMessageEvent( eventType, 'send', {params:util.copyArray( arguments ).slice(1)}, null, extraAttrs );\n    this.evtMapping[msgEvt.id] = {\n      el:el,\n      id:msgEvt.id,\n      deferred:deferred\n    };\n\n    origin = urlUtils.getOriginByFrameEl( el );\n    contentWindow = util.getContentWindowByEl( el );\n    util.postMessage( contentWindow, msgEvt, origin );\n\n    return deferred;\n  }\n};\n\n\n/**\n * @namespace\n */\nvar processorBuilder = {\n\n  deferredSendResp:function(){\n\n    /**\n     * @param {Event} msgEvt\n     */\n    return function( msgEvt ) {\n      var callMethodName = 'reject';\n      var frameObserver = this.frameObserver;\n      var respTmp = frameObserver.evtMapping[msgEvt.id];\n      delete frameObserver.evtMapping[msgEvt.id];\n      if ( msgEvt.deferredState === 'done' ) callMethodName = 'resolve';\n      //ignore it when observer is not sender\n      if (respTmp) respTmp.deferred[callMethodName](msgEvt.data);\n    };\n  },\n\n  deferredRecv:function(){\n\n    /**\n     * @param {Event} msgEvt\n     * @param {Object} source\n     * @param {String} origin\n     * @param {Deferred} deferred\n     */\n    return function( msgEvt, source, origin, deferred ){\n\n      var buildPostingOrigin = function( deferredState ){\n\n        return function(){\n          var respMsgEvt = buildMessageEvent( msgEvt.type, 'recv', {result:arguments}, msgEvt.id, {deferredState:deferredState} );\n          util.postMessage( source, respMsgEvt, origin );\n        };\n      };\n      deferred.done(buildPostingOrigin( 'done' ));\n      deferred.fail(buildPostingOrigin( 'fail' ));\n    };\n  }\n};\n\nexport {buildMessageEvent, buildFrameCaller, processorBuilder};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/builder.js","\n/**\n * @function\n * @type Promise\n */\nvar buildDeferred = function() {\n  var reject, resolve;\n  var promise = new Promise(function( res, rej ){\n    resolve = res;\n    reject = rej;\n  });\n  promise.resolve = resolve;\n  promise.reject = reject;\n\n  var toArray = function(val){\n    return Array.prototype.slice.call(val, 0);\n  };\n\n  promise.resolve = function(){\n    resolve.call(null, toArray(arguments));\n  };\n\n  promise.reject = function(){\n    reject.call(null, toArray(arguments));\n  };\n\n  promise.always = function(always){\n    promise.then(function(val){\n\n      always.apply(null, toArray(val));\n    },\n    function(){\n\n      always.apply(null, toArray(val));\n    });\n  };\n\n  promise.done = function(done){\n    promise.then(function(val){\n      done.apply(null, toArray(val));\n    });\n  };\n\n  promise.fail = function(fail){\n    promise.then(function(){},function(val){\n      fail.apply(null, toArray(val));\n    });\n  };\n\n  return promise;\n};\n\n\nexport default buildDeferred;\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/buildDeferred.js","\nvar guid = function() {\n  var s4 = function() {\n    return Math.floor((1 + Math.random()) * 0x10000)\n      .toString(16)\n      .substring(1);\n  }\n  return s4() + s4() + '-' + s4() + '-' + s4() + '-' +\n    s4() + '-' + s4() + s4() + s4();\n}\n\nexport default guid;\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/guid.js","\n//var doc = window.document;\n//var Deferred = buildDeferred;\nexport const FRAME_OBSERVER = \"_FRAME_OBSERVER_\";\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/config.js","\nimport {FRAME_OBSERVER} from './config';\nimport util from './util';\nimport guid from './guid';\nimport EventObserver from './EventObserver';\nimport StateManager from './StateManager';\nimport EventMsgProcessor from './processor/EventMsgProcessor';\nimport RegisterMsgProcessor from './processor/RegisterMsgProcessor';\nimport StateProcessor from './processor/StateProcessor';\nimport UnregisterMsgProcessor from './processor/UnregisterMsgProcessor';\nimport MethodMsgProcessor from './processor/MethodMsgProcessor';\nimport {buildFrameCaller} from './builder';\nimport Deferred from './buildDeferred';\nimport FrameObserverContext from './FrameObserverContext';\n\n\n/**\n * @class\n */\nvar FrameObserver = function(){\n\n  this.evtMapping = {};\n  this.eventObservers = {};\n  this.registerEventObserver = new EventObserver();\n  this.stateManager = new StateManager();\n  this.methods_ = {};\n\n  this.msgProcessors = {\n    method:new MethodMsgProcessor( this ),\n    registerEvent:new RegisterMsgProcessor( this ),\n    unregisterEvent:new UnregisterMsgProcessor( this ),\n    event:new EventMsgProcessor( this ),\n    state:new StateProcessor( this )\n  };\n  window.addEventListener( 'message', this.onMessage.bind( this ) );\n};\n\nFrameObserver.prototype = {\n\n  /**\n   * @param {Event} evt\n   */\n  onMessage:function( evt ){\n    var origin = evt.origin, msgEvt;\n    try {\n      msgEvt = JSON.parse( evt.data );\n    } catch (e){\n      msgEvt = null;\n    }\n\n    //event filter if source is not sended from FrameObserver\n    if ( util.isObject( msgEvt ) && FRAME_OBSERVER in msgEvt ) {\n      var deferred = Deferred();\n      var source = evt.source;\n\n      //console.log( msgEvt, evt );\n      //console.log( evt );\n\n      var msgProcessor = this.msgProcessors[ msgEvt.type ];\n\n      if ( msgEvt.direction == 'send' ) msgProcessor.onRecv( msgEvt, source, origin, deferred ); else msgProcessor.onSendResp( msgEvt, origin, deferred );\n    }\n  },\n\n  /**\n   * @private \n   * @param {HTMLElement} el\n   * @type String\n   */\n  getFrameEventId_:function( el ){\n    var frameEventId = \"window\";\n\n    if ( util.isElement( el ) ) {\n      frameEventId = (function( id ){\n        var frameEventId = id ? id : guid();\n        util.data( el, 'frameEventId', frameEventId );\n        return frameEventId;\n      })(util.data( el, 'frameEventId' ));\n    }\n    return frameEventId;\n  },\n\n  /**\n   * @private\n   * @param {String} frameEventId\n   * @type Array[EventObserver]\n   */\n  getFrameObserverList_:function( frameEventId ){\n\n    return !this.eventObservers[frameEventId] ? this.eventObservers[frameEventId] = []:this.eventObservers[frameEventId];\n  },\n\n  /**\n   * @private\n   * @param {HTMLElement} el\n   * @type EventObserver\n   */\n  getObserver_:function( el ){\n\n    var frameEventId = this.getFrameEventId_( el );\n    var frameObserverList = this.getFrameObserverList_( frameEventId );\n    var observer;\n\n    for ( var i in frameObserverList ) {\n\n      if ( frameObserverList[i].el === el ) {\n        observer = frameObserverList[i].observer;\n        break;\n      }\n    }\n\n    if ( !observer ) {\n\n      observer = new EventObserver();\n\n      frameObserverList.push({\n        el:el,\n        observer:observer\n      });\n    }\n\n    return observer;\n  },\n\n  /**\n   * @param {HTMLElement} el\n   * @param {String} eventName\n   * @param {function} func\n   */\n  on:function( el, eventName, func ){\n\n    var observer = this.getObserver_( el );\n    var frameEventId = this.getFrameEventId_( el );\n\n    observer.on( eventName, func );\n\n    if ( observer.getEventNumber( eventName ) === 1 ) this.registerEvent( el, {eventName:eventName, frameEventId:frameEventId} );\n  },\n\n  /**\n   * @param {HTMLElement} el\n   * @param {String} eventName\n   * @param {function} func\n   */\n  off:function( el, eventName, func ){\n\n    var observer = this.getObserver_( el );\n    var frameEventId = this.getFrameEventId_( el );\n\n    observer.off( eventName, func );\n\n    if ( observer.getEventNumber( eventName ) === 0 ) this.unregisterEvent( el, {eventName:eventName, frameEventId:frameEventId} );\n  },\n\n  /**\n   * @param {String} name\n   */\n  trigger:function( name ){\n \n    this.registerEventObserver.trigger( name, util.copyArray( arguments ).slice(1) );\n  },\n\n  /**\n   * @param {HTMLElement} el\n   * @type Deferred\n   */\n  callMethod:buildFrameCaller( 'method' ),\n\n  /**\n   * @param {HTMLElement} el\n   * @type Deferred\n   */\n  registerEvent:buildFrameCaller( 'registerEvent' ),\n\n  /**\n   * @param {HTMLElement} el\n   * @type Deferred\n   */\n  unregisterEvent:buildFrameCaller( 'unregisterEvent' ),\n\n\n  /**\n   * @param {Object} methods\n   */\n  registerMethods:function( methods ){\n\n    for (var i in methods) {\n      this.methods_[i] = methods[i];\n    };\n  },\n\n  /**\n   * @param {String} stateName\n   */\n  resolveState:function( stateName ){\n\n    this.stateManager.get( stateName ).resolve( util.copyArray( arguments ).slice(1) );\n  },\n\n  /**\n   * @param {String} stateName\n   */\n  rejectState:function( stateName ){\n\n    this.stateManager.get( stateName ).reject( util.copyArray( arguments ).slice(1) );\n  },\n\n\n  /**\n   * @param {HTMLElement} el\n   * @param {String} stateName\n   * @type Deferred\n   */\n  readyState:buildFrameCaller( 'state' ),\n\n  /**\n   * @param {HTMLElement|Window} el\n   * @type FrameObserverContext\n   */\n  getContext:function(el) {\n    return new FrameObserverContext(el);\n  }\n};\n\n\nvar frameObserver = new FrameObserver();\n\n//if ( typeof window !== \"undefined\" ) window.frameObserver = frameObserver;\n//if ( typeof module !== \"undefined\" ) module.exports = frameObserver;\n\nexport default frameObserver;\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/frameObserver.js","\nimport frameObserver from './frameObserver';\nexport default frameObserver;\nmodule.exports = frameObserver;\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/index.js","\nimport util from './util';\n\n/**\n * @class\n */\nvar EventObserver = function(){\n\n  this.events = {};\n};\n\nEventObserver.prototype = {\n\n  /**\n   * @param {String} name\n   * @param {function} func\n   * @param {Object} opts\n   * @param {*} opts.target\n   * @param {boolean} opts.once is a inner variable\n   */\n  on:function( name, func, opts ){\n    var opts = opts || {};\n\n    if ( !this.events[name] ) this.events[name] = [];\n\n    this.events[name].push({\n      func:func,\n      once:opts.once || false,\n      target:opts.target || null\n    });\n  },\n\n  /**\n   * @param {String} name\n   * @param {function} func\n   */\n  once:function( name, func ){\n\n    this.on( name, func, {once:true} );\n  },\n\n  /**\n   * @param {String} name\n   * @param {function} func\n   * @param {*} target\n   */\n  off:function( name, func, target ){\n\n    var eventList = this.events[name] || [];\n\n    if ( arguments.length === 1 ) {\n\n      delete this.events[name];\n\n    } else {\n\n      for ( var i in eventList ) {\n        var evt = eventList[i];\n\n        if ( (evt.func === func && ( evt.target === null || evt.target === target )) ||\n             (func === undefined && evt.target === target )\n           ) {\n\n          eventList.splice( i, 1 );\n          break;\n        }\n      }\n    }\n  },\n\n  /**\n   * @param {String} eventName\n   * @type Number\n   */\n  getEventNumber:function( eventName ){\n\n    return this.events[eventName]? this.events[eventName].length : 0;\n  },\n\n  /**\n   * @param {String} name\n   */\n  /**\n   * @param {Objects} opts\n   * @param {String} opts.name\n   * @param {*} opts.target\n   */\n  trigger:function( opts ){\n    var name, target, timeStamp = (+new Date());\n\n    if ( util.isString( opts ) ) {\n      name = opts;\n    } else {\n      name = opts.name;\n      target = opts.target || null;\n    }\n\n    var eventList = this.events[name] || [], i;\n    var originParams = util.copyArray( arguments );\n\n    if ( target ) {\n\n      eventList = (function( eventList, target ){\n        var filterList = [];\n\n        for ( var i in eventList ) {\n          if ( eventList[i].target === target ) filterList.push( eventList[i] );\n        }        \n\n        return filterList;\n      })( eventList, target );\n    }\n\n    for ( i in eventList ) {\n\n      var evt = {\n        type:name,\n        timeStamp:timeStamp\n      };\n\n      var params = originParams.slice(1);\n\n      params.unshift( evt );\n      eventList[i].func.apply( null, params )\n    }\n\n    for ( i = 0; i < eventList.length ; i++ ) {\n\n      if ( eventList[i].once ) {\n\n        target? this.off( name, opts.func, opts.target ) : this.off( name, opts.func );\n      }\n    }\n\n  }\n};\n\n\nexport default EventObserver;\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/EventObserver.js","\nimport frameObserver from './frameObserver';\n\nclass FrameObserverContext {\n\n  constructor(scope){\n    this.scope = scope;\n  }\n\n  on(...args){\n    frameObserver.on(this.scope, ...args);\n    return this;\n  }\n\n  off(...args){\n    frameObserver.off(this.scope, ...args);\n    return this;\n  }\n\n  readyState(...args){\n    return frameObserver.readyState(this.scope, ...args);\n  }\n\n  callMethod(...args){\n    return frameObserver.callMethod(this.scope, ...args);\n  }\n\n  getElement(){\n    return this.scope instanceof HTMLElement ? this.scope : null;\n  }\n\n}\n\nexport default FrameObserverContext;\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/FrameObserverContext.js","\nimport Deferred from './buildDeferred';\n\n/**\n * @class\n */\nvar StateManager = function(){\n\n  this.stateDeferredMap = {};\n};\n\nStateManager.prototype = {\n\n  /**\n   * @param {String} stateName\n   * @param {Deferred} deferred\n   */\n  assign:function( stateName, deferred ){\n    var stateDeferred = this.get( stateName );\n    stateDeferred.done(deferred.resolve.bind(deferred));\n    stateDeferred.fail(deferred.reject.bind(deferred));\n  },\n\n  /**\n   * @param {String} stateName\n   * @type Deferred\n   */\n  get:function( stateName ){\n    var deferred = this.stateDeferredMap[stateName];\n    return deferred ? deferred : this.stateDeferredMap[stateName] = Deferred();\n  }\n};\n\nexport default StateManager;\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/StateManager.js","\nimport util from '../util';\n\n/**\n * @class\n */\nvar EventMsgProcessor = function( frameObserver ){\n\n  this.frameObserver = frameObserver;\n};\n\nEventMsgProcessor.prototype = {\n  /**\n   * @param {Event} msgEvt\n   * @param {Object} source\n   * @param {String} origin\n   * @param {Deferred} deferred\n   */\n  onRecv:function( msgEvt, source, origin, deferred ){\n    var params = msgEvt.data.result;\n    var type = params[0].type;\n    var param = util.copyArray( params[1] );\n    //console.log( arguments );\n    param.unshift( type );\n    var observerList = this.frameObserver.getFrameObserverList_( msgEvt.frameEventId );\n\n    if ( observerList ) {\n\n      for ( var i in observerList ) {\n        var observerContext = observerList[i];\n\n        if ( util.getContentWindowByEl( observerContext.el ) === source ) {\n          observerContext.observer.trigger.apply( observerContext.observer, param );\n        }\n      }\n    }\n  }\n};\n\nexport default EventMsgProcessor;\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/processor/EventMsgProcessor.js","\nimport {processorBuilder} from '../builder'; \n\n/**\n * @class\n */\nvar MethodMsgProcessor = function( frameObserver ){\n  this.frameObserver = frameObserver;\n};\n\nMethodMsgProcessor.prototype = {\n\n  /**\n   * @param {Event} msgEvt\n   * @param {Object} source\n   * @param {String} origin\n   * @param {Deferred} deferred\n   */\n  onRecv:function( msgEvt, source, origin, deferred ){\n    var frameObserver = this.frameObserver;\n    var params = msgEvt.data.params;\n    var methodName = params.shift()\n\n    params.unshift( deferred );\n\n    if ( frameObserver.methods_ && frameObserver.methods_[methodName] ) {\n      frameObserver.methods_[methodName].apply( frameObserver.methods_, params );\n    } else {\n      deferred.reject({err:\"the method is not exist.\"});\n    }\n\n    processorBuilder.deferredRecv().apply(this, arguments);\n\n  },\n\n  /**\n   * @param {Event} msgEvt\n   */\n  onSendResp:processorBuilder.deferredSendResp()\n};\n\n\nexport default MethodMsgProcessor;\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/processor/MethodMsgProcessor.js","\nimport util from '../util';\nimport {buildMessageEvent} from '../builder'; \n\n/**\n * @class\n */\nvar RegisterMsgProcessor = function( frameObserver ){\n\n  this.frameObserver = frameObserver;\n};\n\nRegisterMsgProcessor.prototype = {\n\n  /**\n   * @param {Event} msgEvt\n   * @param {Object} source\n   * @param {String} origin\n   * @param {Deferred} deferred\n   */\n  onRecv:function( msgEvt, source, origin, deferred ){\n    var param = msgEvt.data.params[0];\n    var frameObserver = this.frameObserver;\n    var eventName = param.eventName;\n    var frameEventId = param.frameEventId;\n\n    //console.log( arguments , param);\n    frameObserver.registerEventObserver.on( eventName, function(){\n      //console.log( arguments );\n      var respMsgEvt = buildMessageEvent( 'event', 'send', {result:util.copyArray( arguments ) }, msgEvt.id );\n      respMsgEvt.frameEventId = frameEventId;\n      util.postMessage( source, respMsgEvt, origin );\n    }, {target:source} );\n  },\n\n  /**\n   * @param {Event} msgEvt\n   */\n  onSendResp:function( msgEvt ){\n\n  }\n};\n\nexport default RegisterMsgProcessor;\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/processor/RegisterMsgProcessor.js","\nimport {processorBuilder} from '../builder';\n\n/**\n * @class\n */\nvar StateProcessor = function( frameObserver ){\n\n  this.frameObserver = frameObserver;\n};\n\nStateProcessor.prototype = {\n\n  /**\n   * @param {Event} msgEvt\n   * @param {Object} source\n   * @param {String} origin\n   * @param {Deferred} deferred\n   */\n  onRecv:function( msgEvt, source, origin, deferred ){\n    var frameObserver = this.frameObserver;\n    var data = msgEvt.data;\n    var params = data.params;\n\n    frameObserver.stateManager.assign( params[0], deferred );\n    processorBuilder.deferredRecv().apply(this, arguments);\n  },\n\n  /**\n   * @param {Event} msgEvt\n   */\n  onSendResp:processorBuilder.deferredSendResp()\n};\n\nexport default StateProcessor;\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/processor/StateProcessor.js","\n/**\n * @class\n */\nvar UnregisterMsgProcessor = function( frameObserver ){\n\n  this.frameObserver = frameObserver;\n};\n\nUnregisterMsgProcessor.prototype = {\n\n  /**\n   * @param {Event} msgEvt\n   * @param {Object} source\n   * @param {String} origin\n   * @param {Deferred} deferred\n   */\n  onRecv:function( msgEvt, source, origin, deferred ){\n    var param = msgEvt.data.params[0];\n    var frameObserver = this.frameObserver;\n    var eventName = param.eventName;\n    var frameEventId = param.frameEventId;\n\n    frameObserver.registerEventObserver.off( eventName, undefined, source );\n  },\n\n  /**\n   * @param {Event} msgEvt\n   */\n  onSendResp:function( msgEvt ){\n\n  }\n\n};\n\nexport default UnregisterMsgProcessor;\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/processor/UnregisterMsgProcessor.js","\nimport util from './util';\n\n/**\n * @namespace\n *\n */\nvar urlUtils = {\n\n  /***\n   * @param {String} url\n   * @type String\n   */\n  getOrigin:function( url ){\n    var result = /https?:\\/\\/[^/]*\\/?/.exec( url );\n    return result.length ? result[0] : null;\n  },\n\n  /** \n   * @param {HTMLElement} el\n   * @type Object\n   */\n  getOriginByFrameEl:function( el ){\n\n    return util.isElement( el ) ? urlUtils.getOrigin( el.src ) : document.referrer;\n  }\n};\n\nexport default urlUtils;\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/urlUtils.js"],"sourceRoot":""}