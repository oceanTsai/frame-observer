
<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="UTF-8">
        <title></title>
</head>
<body>
  <script src="js/config.js"></script>
  <script src="js/guid.js"></script>
  <script src="js/deferred.js"></script>
  <script src="js/util.js"></script>
  <script src="js/urlUtils.js"></script>
  <script src="js/EventObserver.js"></script>
  <script src="js/builder.js"></script>
  <script src="js/MethodProcessor.js"></script>
  <script src="js/RegisterMsgProcessor.js"></script>
  <script src="js/UnregisterMsgProcessor.js"></script>
  <script src="js/EventMsgProcessor.js"></script>
  <script src="js/frameObserver.js"></script>
  <iframe src="http://127.0.0.1:8989/frame.html" frameborder="0"></iframe>

  <script>

    frameObserver.registerMethods({
      callParent:function( deferred ){
        deferred.resolve(2,3,4);
      }
    });
    setTimeout(function(){
      var iframe = document.querySelector('iframe');

      var clickBody = function(){
        console.log('clicked from frame');
      };

      var clickBody2 = function(){
        console.log('clicked from frame2');
      };

      frameObserver.on( iframe, 'clickBody', clickBody);
      frameObserver.on( iframe, 'clickBody', clickBody2);

      setTimeout(function(){
        frameObserver.off( iframe, 'clickBody', clickBody );
        frameObserver.off( iframe, 'clickBody', clickBody2 );
      }, 1000);

      var deferred = frameObserver.callMethod( iframe, "info", {a:3} );
      deferred.done(function(){
        console.log( arguments );
      });
    }, 1000);
  </script>
       
</body>
</html>

